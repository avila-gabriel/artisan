class N{withFields(Z){let W=Object.keys(this).map((X)=>(X in Z)?Z[X]:this[X]);return new this.constructor(...W)}}class FZ{static fromArray(Z,W){let X=W||new D;for(let Q=Z.length-1;Q>=0;--Q)X=new CZ(Z[Q],X);return X}[Symbol.iterator](){return new NX(this)}toArray(){return[...this]}atLeastLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return W!==void 0}hasLength(Z){let W=this;while(Z-- >0&&W)W=W.tail;return Z===-1&&W instanceof D}countLength(){let Z=this,W=0;while(Z)Z=Z.tail,W++;return W-1}}function z(Z,W){return new CZ(Z,W)}function U(Z,W){return FZ.fromArray(Z,W)}class NX{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof D)return{done:!0};else{let{head:Z,tail:W}=this.#Z;return this.#Z=W,{value:Z,done:!1}}}}class D extends FZ{}class CZ extends FZ{constructor(Z,W){super();this.head=Z,this.tail=W}}var zX=(Z)=>Z instanceof CZ,RX=(Z)=>Z.head,IX=(Z)=>Z.tail;class D8{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,W,X){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=W??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=X??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return O8(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let W=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let Q=0;Q<W;Q++)if(this.rawBuffer[Q]!==Z.rawBuffer[Q])return!1;let X=this.bitSize%8;if(X){let Q=8-X;if(this.rawBuffer[W]>>Q!==Z.rawBuffer[W]>>Q)return!1}}else{for(let Q=0;Q<W;Q++){let K=O8(this.rawBuffer,this.bitOffset,Q),V=O8(Z.rawBuffer,Z.bitOffset,Q);if(K!==V)return!1}let X=this.bitSize%8;if(X){let Q=O8(this.rawBuffer,this.bitOffset,W),K=O8(Z.rawBuffer,Z.bitOffset,W),V=8-X;if(Q>>V!==K>>V)return!1}}return!0}get buffer(){if(UX("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(UX("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function O8(Z,W,X){if(W===0)return Z[X]??0;else{let Q=Z[X]<<W&255,K=Z[X+1]>>8-W;return Q|K}}class YW{constructor(Z){this.value=Z}}var HX={};function UX(Z,W){if(HX[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${W}.`),HX[Z]=!0}class e0 extends N{static isResult(Z){return Z instanceof e0}}class j extends e0{constructor(Z){super();this[0]=Z}isOk(){return!0}}class P extends e0{constructor(Z){super();this[0]=Z}isOk(){return!1}}function r(Z,W){let X=[Z,W];while(X.length){let Q=X.pop(),K=X.pop();if(Q===K)continue;if(!FX(Q)||!FX(K))return!1;if(!U7(Q,K)||K7(Q,K)||V7(Q,K)||G7(Q,K)||Y7(Q,K)||J7(Q,K)||H7(Q,K))return!1;let G=Object.getPrototypeOf(Q);if(G!==null&&typeof G.equals==="function")try{if(Q.equals(K))continue;else return!1}catch{}let[Y,J]=Q7(Q),H=Y(Q),F=Y(K);if(H.length!==F.length)return!1;for(let R of H)X.push(J(Q,R),J(K,R))}return!0}function Q7(Z){if(Z instanceof Map)return[(W)=>W.keys(),(W,X)=>W.get(X)];else{let W=Z instanceof globalThis.Error?["message"]:[];return[(X)=>[...W,...Object.keys(X)],(X,Q)=>X[Q]]}}function K7(Z,W){return Z instanceof Date&&(Z>W||Z<W)}function V7(Z,W){return!(Z instanceof D8)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===W.byteLength&&Z.every((X,Q)=>X===W[Q]))}function G7(Z,W){return Array.isArray(Z)&&Z.length!==W.length}function Y7(Z,W){return Z instanceof Map&&Z.size!==W.size}function J7(Z,W){return Z instanceof Set&&(Z.size!=W.size||[...Z].some((X)=>!W.has(X)))}function H7(Z,W){return Z instanceof RegExp&&(Z.source!==W.source||Z.flags!==W.flags)}function FX(Z){return typeof Z==="object"&&Z!==null}function U7(Z,W){if(typeof Z!=="object"&&typeof W!=="object"&&(!Z||!W))return!1;if([Promise,WeakSet,WeakMap,Function].some((Q)=>Z instanceof Q))return!1;return Z.constructor===W.constructor}function E0(Z,W,X,Q,K,V,G){let Y=new globalThis.Error(V);Y.gleam_error=Z,Y.file=W,Y.module=X,Y.line=Q,Y.function=K,Y.fn=K;for(let J in G)Y[J]=G[J];return Y}class L extends N{constructor(Z){super();this[0]=Z}}class _ extends N{}function JW(Z,W){if(Z instanceof L){let X=Z[0];return new j(X)}else return new P(W)}function jX(Z,W){if(Z instanceof L)return Z[0];else return W}var OX=new WeakMap,HW=new DataView(new ArrayBuffer(8)),UW=0;function FW(Z){let W=OX.get(Z);if(W!==void 0)return W;let X=UW++;if(UW===2147483647)UW=0;return OX.set(Z,X),X}function NW(Z,W){return Z^W+2654435769+(Z<<6)+(Z>>2)|0}function RW(Z){let W=0,X=Z.length;for(let Q=0;Q<X;Q++)W=Math.imul(31,W)+Z.charCodeAt(Q)|0;return W}function MX(Z){HW.setFloat64(0,Z);let W=HW.getInt32(0),X=HW.getInt32(4);return Math.imul(73244475,W>>16^W)^X}function F7(Z){return RW(Z.toString())}function N7(Z){let W=Object.getPrototypeOf(Z);if(W!==null&&typeof W.hashCode==="function")try{let Q=Z.hashCode(Z);if(typeof Q==="number")return Q}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return FW(Z);if(Z instanceof Date)return MX(Z.getTime());let X=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let Q=0;Q<Z.length;Q++)X=Math.imul(31,X)+fZ(Z[Q])|0;else if(Z instanceof Set)Z.forEach((Q)=>{X=X+fZ(Q)|0});else if(Z instanceof Map)Z.forEach((Q,K)=>{X=X+NW(fZ(Q),fZ(K))|0});else{let Q=Object.keys(Z);for(let K=0;K<Q.length;K++){let V=Q[K],G=Z[V];X=X+NW(fZ(G),RW(V))|0}}return X}function fZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return MX(Z);case"string":return RW(Z);case"bigint":return F7(Z);case"object":return N7(Z);case"symbol":return FW(Z);case"function":return FW(Z);default:return 0}}var oZ=5,IW=Math.pow(2,oZ),z7=IW-1,R7=IW/2,I7=IW/4,jZ=0,aZ=1,LZ=2,x0=3,jW={type:LZ,bitmap:0,array:[]};function M8(Z,W){return Z>>>W&z7}function Z9(Z,W){return 1<<M8(Z,W)}function j7(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function OW(Z,W){return j7(Z&W-1)}function yZ(Z,W,X){let Q=Z.length,K=Array(Q);for(let V=0;V<Q;++V)K[V]=Z[V];return K[W]=X,K}function O7(Z,W,X){let Q=Z.length,K=Array(Q+1),V=0,G=0;while(V<W)K[G++]=Z[V++];K[G++]=X;while(V<Q)K[G++]=Z[V++];return K}function zW(Z,W){let X=Z.length,Q=Array(X-1),K=0,V=0;while(K<W)Q[V++]=Z[K++];++K;while(K<X)Q[V++]=Z[K++];return Q}function AX(Z,W,X,Q,K,V){let G=fZ(W);if(G===Q)return{type:x0,hash:G,array:[{type:jZ,k:W,v:X},{type:jZ,k:K,v:V}]};let Y={val:!1};return A8(DW(jW,Z,G,W,X,Y),Z,Q,K,V,Y)}function A8(Z,W,X,Q,K,V){switch(Z.type){case aZ:return D7(Z,W,X,Q,K,V);case LZ:return DW(Z,W,X,Q,K,V);case x0:return M7(Z,W,X,Q,K,V)}}function D7(Z,W,X,Q,K,V){let G=M8(X,W),Y=Z.array[G];if(Y===void 0)return V.val=!0,{type:aZ,size:Z.size+1,array:yZ(Z.array,G,{type:jZ,k:Q,v:K})};if(Y.type===jZ){if(r(Q,Y.k)){if(K===Y.v)return Z;return{type:aZ,size:Z.size,array:yZ(Z.array,G,{type:jZ,k:Q,v:K})}}return V.val=!0,{type:aZ,size:Z.size,array:yZ(Z.array,G,AX(W+oZ,Y.k,Y.v,X,Q,K))}}let J=A8(Y,W+oZ,X,Q,K,V);if(J===Y)return Z;return{type:aZ,size:Z.size,array:yZ(Z.array,G,J)}}function DW(Z,W,X,Q,K,V){let G=Z9(X,W),Y=OW(Z.bitmap,G);if((Z.bitmap&G)!==0){let J=Z.array[Y];if(J.type!==jZ){let F=A8(J,W+oZ,X,Q,K,V);if(F===J)return Z;return{type:LZ,bitmap:Z.bitmap,array:yZ(Z.array,Y,F)}}let H=J.k;if(r(Q,H)){if(K===J.v)return Z;return{type:LZ,bitmap:Z.bitmap,array:yZ(Z.array,Y,{type:jZ,k:Q,v:K})}}return V.val=!0,{type:LZ,bitmap:Z.bitmap,array:yZ(Z.array,Y,AX(W+oZ,H,J.v,X,Q,K))}}else{let J=Z.array.length;if(J>=R7){let H=Array(32),F=M8(X,W);H[F]=DW(jW,W+oZ,X,Q,K,V);let R=0,O=Z.bitmap;for(let S=0;S<32;S++){if((O&1)!==0){let B=Z.array[R++];H[S]=B}O=O>>>1}return{type:aZ,size:J+1,array:H}}else{let H=O7(Z.array,Y,{type:jZ,k:Q,v:K});return V.val=!0,{type:LZ,bitmap:Z.bitmap|G,array:H}}}}function M7(Z,W,X,Q,K,V){if(X===Z.hash){let G=MW(Z,Q);if(G!==-1){if(Z.array[G].v===K)return Z;return{type:x0,hash:X,array:yZ(Z.array,G,{type:jZ,k:Q,v:K})}}let Y=Z.array.length;return V.val=!0,{type:x0,hash:X,array:yZ(Z.array,Y,{type:jZ,k:Q,v:K})}}return A8({type:LZ,bitmap:Z9(Z.hash,W),array:[Z]},W,X,Q,K,V)}function MW(Z,W){let X=Z.array.length;for(let Q=0;Q<X;Q++)if(r(W,Z.array[Q].k))return Q;return-1}function e8(Z,W,X,Q){switch(Z.type){case aZ:return A7(Z,W,X,Q);case LZ:return P7(Z,W,X,Q);case x0:return B7(Z,Q)}}function A7(Z,W,X,Q){let K=M8(X,W),V=Z.array[K];if(V===void 0)return;if(V.type!==jZ)return e8(V,W+oZ,X,Q);if(r(Q,V.k))return V;return}function P7(Z,W,X,Q){let K=Z9(X,W);if((Z.bitmap&K)===0)return;let V=OW(Z.bitmap,K),G=Z.array[V];if(G.type!==jZ)return e8(G,W+oZ,X,Q);if(r(Q,G.k))return G;return}function B7(Z,W){let X=MW(Z,W);if(X<0)return;return Z.array[X]}function AW(Z,W,X,Q){switch(Z.type){case aZ:return S7(Z,W,X,Q);case LZ:return T7(Z,W,X,Q);case x0:return q7(Z,Q)}}function S7(Z,W,X,Q){let K=M8(X,W),V=Z.array[K];if(V===void 0)return Z;let G=void 0;if(V.type===jZ){if(!r(V.k,Q))return Z}else if(G=AW(V,W+oZ,X,Q),G===V)return Z;if(G===void 0){if(Z.size<=I7){let Y=Z.array,J=Array(Z.size-1),H=0,F=0,R=0;while(H<K){let O=Y[H];if(O!==void 0)J[F]=O,R|=1<<H,++F;++H}++H;while(H<Y.length){let O=Y[H];if(O!==void 0)J[F]=O,R|=1<<H,++F;++H}return{type:LZ,bitmap:R,array:J}}return{type:aZ,size:Z.size-1,array:yZ(Z.array,K,G)}}return{type:aZ,size:Z.size,array:yZ(Z.array,K,G)}}function T7(Z,W,X,Q){let K=Z9(X,W);if((Z.bitmap&K)===0)return Z;let V=OW(Z.bitmap,K),G=Z.array[V];if(G.type!==jZ){let Y=AW(G,W+oZ,X,Q);if(Y===G)return Z;if(Y!==void 0)return{type:LZ,bitmap:Z.bitmap,array:yZ(Z.array,V,Y)};if(Z.bitmap===K)return;return{type:LZ,bitmap:Z.bitmap^K,array:zW(Z.array,V)}}if(r(Q,G.k)){if(Z.bitmap===K)return;return{type:LZ,bitmap:Z.bitmap^K,array:zW(Z.array,V)}}return Z}function q7(Z,W){let X=MW(Z,W);if(X<0)return Z;if(Z.array.length===1)return;return{type:x0,hash:Z.hash,array:zW(Z.array,X)}}function PX(Z,W){if(Z===void 0)return;let X=Z.array,Q=X.length;for(let K=0;K<Q;K++){let V=X[K];if(V===void 0)continue;if(V.type===jZ){W(V.v,V.k);continue}PX(V,W)}}class IZ{static fromObject(Z){let W=Object.keys(Z),X=IZ.new();for(let Q=0;Q<W.length;Q++){let K=W[Q];X=X.set(K,Z[K])}return X}static fromMap(Z){let W=IZ.new();return Z.forEach((X,Q)=>{W=W.set(Q,X)}),W}static new(){return new IZ(void 0,0)}constructor(Z,W){this.root=Z,this.size=W}get(Z,W){if(this.root===void 0)return W;let X=e8(this.root,0,fZ(Z),Z);if(X===void 0)return W;return X.v}set(Z,W){let X={val:!1},Q=this.root===void 0?jW:this.root,K=A8(Q,0,fZ(Z),Z,W,X);if(K===this.root)return this;return new IZ(K,X.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let W=AW(this.root,0,fZ(Z),Z);if(W===this.root)return this;if(W===void 0)return IZ.new();return new IZ(W,this.size-1)}has(Z){if(this.root===void 0)return!1;return e8(this.root,0,fZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((W,X)=>Z.push([X,W])),Z}forEach(Z){PX(this.root,Z)}hashCode(){let Z=0;return this.forEach((W,X)=>{Z=Z+NW(fZ(W),fZ(X))|0}),Z}equals(Z){if(!(Z instanceof IZ)||this.size!==Z.size)return!1;try{return this.forEach((W,X)=>{if(!r(Z.get(X,!W),W))throw DX}),!0}catch(W){if(W===DX)return!1;throw W}}}var DX=Symbol();class XZ extends N{}class QZ extends N{}class tZ extends N{}function B8(Z,W){if(Z===W)return new QZ;else if(Z<W)return new XZ;else return new tZ}class HZ extends N{}class Z8 extends N{}function k0(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return Q;else{let K=X.head;Z=X.tail,W=z(K,Q)}}}function b(Z){return k0(Z,U([]))}function x7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return b(V);else{let{head:G,tail:Y}=Q,J;if(K(G))J=z(G,V);else J=V;let F=J;Z=Y,W=K,X=F}}}function W9(Z,W){return x7(Z,W,U([]))}function k7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return b(V);else{let{head:G,tail:Y}=Q,J,H=K(G);if(H instanceof j){let R=H[0];J=z(R,V)}else J=V;let F=J;Z=Y,W=K,X=F}}}function T8(Z,W){return k7(Z,W,U([]))}function f7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return b(V);else{let G=Q.head;Z=Q.tail,W=K,X=z(K(G),V)}}}function t(Z,W){return f7(Z,W,U([]))}function y7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return[G,b(Y)];else{let{head:J,tail:H}=K,F=V(G,J),R,O;R=F[0],O=F[1],Z=H,W=V,X=R,Q=z(O,Y)}}}function CX(Z,W,X){return y7(Z,X,W,U([]))}function g7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return b(Y);else{let{head:J,tail:H}=K,F=z(V(J,G),Y);Z=H,W=V,X=G+1,Q=F}}}function LX(Z,W){return g7(Z,W,0,U([]))}function b7(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return Q;else{let K=X.head;Z=X.tail,W=z(K,Q)}}}function NZ(Z,W){return b7(b(Z),W)}function X9(Z,W){return z(W,Z)}function h7(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return b(Q);else{let K=X.head;Z=X.tail,W=k0(K,Q)}}}function Q9(Z){return h7(Z,U([]))}function f0(Z,W){return Q9(t(Z,W))}function zZ(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return K;else{let G=Q.head;Z=Q.tail,W=V(K,G),X=V}}}function _7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return V;else{let J=K.head;Z=K.tail,W=G(V,J,Y),X=G,Q=Y+1}}}function K9(Z,W,X){return _7(Z,W,X,0)}function v7(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return new P(void 0);else{let{head:K,tail:V}=X,G=Q(K);if(G instanceof j)return G;else Z=V,W=Q}}}function BW(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return!0;else{let{head:K,tail:V}=X,G=Q(K);if(G)Z=V,W=Q;else return G}}}function m7(Z,W,X,Q,K,V){while(!0){let G=Z,Y=W,J=X,H=Q,F=K,R=V,O=z(F,J);if(G instanceof D)if(H instanceof HZ)return z(b(O),R);else return z(O,R);else{let{head:S,tail:B}=G,C=Y(F,S);if(H instanceof HZ)if(C instanceof XZ)Z=B,W=Y,X=O,Q=H,K=S,V=R;else if(C instanceof QZ)Z=B,W=Y,X=O,Q=H,K=S,V=R;else{let A;if(H instanceof HZ)A=z(b(O),R);else A=z(O,R);let T=A;if(B instanceof D)return z(U([S]),T);else{let{head:M,tail:q}=B,x,I=Y(S,M);if(I instanceof XZ)x=new HZ;else if(I instanceof QZ)x=new HZ;else x=new Z8;let w=x;Z=q,W=Y,X=U([S]),Q=w,K=M,V=T}}else if(C instanceof XZ){let A;if(H instanceof HZ)A=z(b(O),R);else A=z(O,R);let T=A;if(B instanceof D)return z(U([S]),T);else{let{head:M,tail:q}=B,x,I=Y(S,M);if(I instanceof XZ)x=new HZ;else if(I instanceof QZ)x=new HZ;else x=new Z8;let w=x;Z=q,W=Y,X=U([S]),Q=w,K=M,V=T}}else if(C instanceof QZ){let A;if(H instanceof HZ)A=z(b(O),R);else A=z(O,R);let T=A;if(B instanceof D)return z(U([S]),T);else{let{head:M,tail:q}=B,x,I=Y(S,M);if(I instanceof XZ)x=new HZ;else if(I instanceof QZ)x=new HZ;else x=new Z8;let w=x;Z=q,W=Y,X=U([S]),Q=w,K=M,V=T}}else Z=B,W=Y,X=O,Q=H,K=S,V=R}}}function $7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return k0(V,Y);else if(V instanceof D)return k0(K,Y);else{let{head:J,tail:H}=K,F=V.head,R=V.tail,O=G(J,F);if(O instanceof XZ)Z=H,W=V,X=G,Q=z(J,Y);else if(O instanceof QZ)Z=K,W=R,X=G,Q=z(F,Y);else Z=K,W=R,X=G,Q=z(F,Y)}}}function c7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return b(V);else{let G=Q.tail;if(G instanceof D){let Y=Q.head;return b(z(b(Y),V))}else{let Y=Q.head,J=G.head,H=G.tail,F=$7(Y,J,K,U([]));Z=H,W=K,X=z(F,V)}}}}function u7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return k0(V,Y);else if(V instanceof D)return k0(K,Y);else{let{head:J,tail:H}=K,F=V.head,R=V.tail,O=G(J,F);if(O instanceof XZ)Z=K,W=R,X=G,Q=z(F,Y);else if(O instanceof QZ)Z=H,W=V,X=G,Q=z(J,Y);else Z=H,W=V,X=G,Q=z(J,Y)}}}function d7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return b(V);else{let G=Q.tail;if(G instanceof D){let Y=Q.head;return b(z(b(Y),V))}else{let Y=Q.head,J=G.head,H=G.tail,F=u7(Y,J,K,U([]));Z=H,W=K,X=z(F,V)}}}}function p7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return Q;else if(K instanceof HZ)if(Q.tail instanceof D)return Q.head;else Z=c7(Q,V,U([])),W=new Z8,X=V;else if(Q.tail instanceof D){let Y=Q.head;return b(Y)}else Z=d7(Q,V,U([])),W=new HZ,X=V}}function V9(Z,W){if(Z instanceof D)return Z;else{let X=Z.tail;if(X instanceof D)return Z;else{let Q=Z.head,K=X.head,V=X.tail,G,Y=W(Q,K);if(Y instanceof XZ)G=new HZ;else if(Y instanceof QZ)G=new HZ;else G=new Z8;let J=G,H=m7(V,W,U([Q]),J,K,U([]));return p7(H,new HZ,W)}}}function G9(Z,W){return v7(Z,(X)=>{let Q,K;if(Q=X[0],K=X[1],r(Q,W))return new j(K);else return new P(void 0)})}function SW(Z,W){return T8(Z,(X)=>{let Q,K;if(Q=X[0],K=X[1],r(Q,W))return new j(K);else return new P(void 0)})}function s7(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K instanceof D)return b(z([V,G],Y));else{let J=K.head[0];if(r(J,V)){let H=K.tail;return k0(Y,z([J,G],H))}else{let H=K.head;Z=K.tail,W=V,X=G,Q=z(H,Y)}}}}function TW(Z,W,X){return s7(Z,W,X,U([]))}function wX(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return;else{let{head:K,tail:V}=X;Q(K),Z=V,W=Q}}}function i7(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return V;else{let{head:G,tail:Y}=Q,J=K(G,V);if(J instanceof XZ)Z=Y,W=K,X=V;else if(J instanceof QZ)Z=Y,W=K,X=V;else Z=Y,W=K,X=G}}}function EX(Z,W){if(Z instanceof D)return new P(void 0);else{let{head:X,tail:Q}=Z;return new j(i7(Q,W,X))}}function e7(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return Q;else{let K=X.head;Z=X.tail,W=Q+K}}}function q8(Z){return e7(Z,"")}function ZG(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return V;else{let G=Q.head;Z=Q.tail,W=K,X=V+K+G}}}function K0(Z,W){if(Z instanceof D)return"";else{let{head:X,tail:Q}=Z;return ZG(Q,W,X)}}function J9(Z){let X=fX(Z);return CW(X)}class g0 extends N{constructor(Z,W,X){super();this.expected=Z,this.found=W,this.path=X}}class M0 extends N{constructor(Z){super();this.function=Z}}function A0(Z,W){let X=W.function(Z),Q,K;if(Q=X[0],K=X[1],K instanceof D)return new j(Q);else return new P(K)}function b0(Z){return new M0((W)=>{return[Z,U([])]})}function h0(Z,W){return new M0((X)=>{let Q=Z.function(X),K,V;return K=Q[0],V=Q[1],[W(K),V]})}function FG(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(V instanceof D)return K;else{let{head:G,tail:Y}=V,J=G.function(Q),H,F;if(H=J,F=J[1],F instanceof D)return H;else Z=Q,W=K,X=Y}}}function LW(Z,W){return new M0((X)=>{let Q=Z.function(X),K,V;if(K=Q,V=Q[1],V instanceof D)return K;else return FG(X,K,W)})}function bX(Z,W,X){let Q=X(Z);if(Q instanceof j)return[Q[0],U([])];else return[Q[0],U([new g0(W,_0(Z),U([]))])]}function NG(Z){return bX(Z,"Int",mX)}var hX=new M0(NG);function zG(Z){return bX(Z,"String",$X)}var X8=new M0(zG);function wW(Z){return new M0((W)=>{return vX(W,Z.function,(X,Q)=>{return N9(X,U([Q]))},0,U([]))})}function N9(Z,W){let X=LW(X8,U([(()=>{return h0(hX,a)})()])),Q=t(W,(V)=>{let G=o(V),Y=A0(G,X);if(Y instanceof j)return Y[0];else return"<"+_0(G)+">"}),K=t(Z[1],(V)=>{return new g0(V.expected,V.found,NZ(Q,V.path))});return[Z[0],K]}function RG(Z,W,X,Q,K){while(!0){let V=Z,G=W,Y=X,J=Q,H=K;if(V instanceof D){let R=Y(J);return N9(R,b(G))}else{let{head:F,tail:R}=V,O=_X(J,F);if(O instanceof j){let S=O[0];if(S instanceof L){let B=S[0];Z=R,W=z(F,G),X=Y,Q=B,K=H}else return H(J,z(F,G))}else{let S=O[0],B=Y(J),C;C=B[0];let A=[C,U([new g0(S,_0(J),U([]))])];return N9(A,b(G))}}}}function z9(Z,W,X){return new M0((Q)=>{let K=RG(Z,U([]),W.function,Q,(F,R)=>{let O=W.function(F),S;S=O[0];let B=[S,U([new g0("Field","Nothing",U([]))])];return N9(B,b(R))}),V,G;V=K[0],G=K[1];let Y=X(V).function(Q),J,H;return J=Y[0],H=Y[1],[J,NZ(G,H)]})}function R9(Z,W,X){return z9(U([Z]),W,X)}var pX=void 0,uX={};function o(Z){return Z}function S8(Z){if(/^[-+]?(\d+)$/.test(Z))return new j(parseInt(Z));else return new P(pX)}function a(Z){return Z.toString()}function v0(Z){return[Z.charCodeAt(0)|0,Z.slice(1)]}function bZ(Z){return Z.toLowerCase()}function UZ(Z,W,X){return Z.slice(W,W+X)}function V0(Z,W){return Z.startsWith(W)}var sX=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),jG=new RegExp(`^[${sX}]*`),OG=new RegExp(`[${sX}]*$`);function fX(Z){return Z.replace(jG,"")}function CW(Z){return Z.replace(OG,"")}function D0(){return IZ.new()}function iX(Z){return FZ.fromArray(Z.entries())}function OZ(Z,W){let X=Z.get(W,uX);if(X===uX)return new P(pX);return new j(X)}function nX(Z,W,X){return X.set(Z,W)}function _0(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof e0)return"Result";else if(Z instanceof FZ)return"List";else if(Z instanceof D8)return"BitArray";else if(Z instanceof IZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let W=typeof Z;return W.charAt(0).toUpperCase()+W.slice(1)}}function P8(Z){let W=Z.toString().replace("+","");if(W.indexOf(".")>=0)return W;else{let X=W.indexOf("e");if(X>=0)return W.slice(0,X)+".0"+W.slice(X);else return W+".0"}}class DG{#Z=new Set;inspect(Z){let W=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(W==="string")return this.#V(Z);if(W==="bigint"||Number.isInteger(Z))return Z.toString();if(W==="number")return P8(Z);if(Z instanceof YW)return this.#G(Z);if(Z instanceof D8)return this.#J(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let Q=[];for(let K of Array(Z.length).keys())Q.push(String.fromCharCode(K+97));return`//fn(${Q.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let X;if(Array.isArray(Z))X=`#(${Z.map((Q)=>this.inspect(Q)).join(", ")})`;else if(Z instanceof FZ)X=this.#W(Z);else if(Z instanceof N)X=this.#Q(Z);else if(Z instanceof IZ)X=this.#X(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((Q)=>this.inspect(Q)).join(", ")}))`;else X=this.#K(Z);return this.#Z.delete(Z),X}#K(Z){let W=Object.getPrototypeOf(Z)?.constructor?.name||"Object",X=[];for(let V of Object.keys(Z))X.push(`${this.inspect(V)}: ${this.inspect(Z[V])}`);let Q=X.length?" "+X.join(", ")+" ":"";return`//js(${W==="Object"?"":W+" "}{${Q}})`}#X(Z){let W="dict.from_list([",X=!0;return Z.forEach((Q,K)=>{if(!X)W=W+", ";W=W+"#("+this.inspect(K)+", "+this.inspect(Q)+")",X=!1}),W+"])"}#Q(Z){let W=Object.keys(Z).map((X)=>{let Q=this.inspect(Z[X]);return isNaN(parseInt(X))?`${X}: ${Q}`:Q}).join(", ");return W?`${Z.constructor.name}(${W})`:Z.constructor.name}#W(Z){if(Z instanceof D)return"[]";let W='charlist.from_string("',X="[",Q=Z;while(Q instanceof CZ){let K=Q.head;if(Q=Q.tail,X!=="[")X+=", ";if(X+=this.inspect(K),W)if(Number.isInteger(K)&&K>=32&&K<=126)W+=String.fromCharCode(K);else W=null}if(W)return W+'")';else return X+"]"}#V(Z){let W='"';for(let X=0;X<Z.length;X++){let Q=Z[X];switch(Q){case`
`:W+="\\n";break;case"\r":W+="\\r";break;case"\t":W+="\\t";break;case"\f":W+="\\f";break;case"\\":W+="\\\\";break;case'"':W+="\\\"";break;default:if(Q<" "||Q>"~"&&Q<" ")W+="\\u{"+Q.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else W+=Q}}return W+='"',W}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#J(Z){if(Z.bitSize===0)return"<<>>";let W="<<";for(let X=0;X<Z.byteSize-1;X++)W+=Z.byteAt(X).toString(),W+=", ";if(Z.byteSize*8===Z.bitSize)W+=Z.byteAt(Z.byteSize-1).toString();else{let X=Z.bitSize%8;W+=Z.byteAt(Z.byteSize-1)>>8-X,W+=`:size(${X})`}return W+=">>",W}}function _X(Z,W){if(Z instanceof IZ||Z instanceof WeakMap||Z instanceof Map){let Q={},K=Z.get(W,Q);if(K===Q)return new j(new _);return new j(new L(K))}let X=Number.isInteger(W);if(X&&W>=0&&W<8&&Z instanceof FZ){let Q=0;for(let K of Z){if(Q===W)return new j(new L(K));Q++}return new P("Indexable")}if(X&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(W in Z)return new j(new L(Z[W]));return new j(new _)}return new P(X?"Indexable":"Dict")}function vX(Z,W,X,Q,K){if(!(Z instanceof FZ||Array.isArray(Z))){let G=new g0("List",_0(Z),K);return[K,FZ.fromArray([G])]}let V=[];for(let G of Z){let Y=W(G),[J,H]=Y;if(H instanceof CZ){let[F,R]=X(Y,Q.toString());return[K,R]}V.push(J),Q++}return[FZ.fromArray(V),K]}function mX(Z){if(Number.isInteger(Z))return new j(Z);return new P(0)}function $X(Z){if(typeof Z==="string")return new j(Z);return new P("")}function MG(Z,W){return!r(OZ(W,Z),new P(void 0))}function qW(Z,W){return MG(W,Z)}function y0(Z,W,X){return nX(W,X,Z)}function AG(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return Q;else{let K=X.head;Z=X.tail,W=z(K,Q)}}}function PG(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return AG(Q,U([]));else{let K=X.tail,V=X.head[0];Z=K,W=z(V,Q)}}}function Q8(Z){return PG(iX(Z),U([]))}function P0(Z,W){if(Z instanceof j){let X=Z[0];return new j(W(X))}else return Z}function j9(Z,W){if(Z instanceof j)return Z;else{let X=Z[0];return new P(W(X))}}function dZ(Z,W){if(Z instanceof j){let X=Z[0];return W(X)}else return Z}function _Z(Z,W){if(Z instanceof j)return Z[0];else return W}function rX(Z){if(Z instanceof j)return Z[0];else return Z[0]}function O9(Z,W){if(Z instanceof j)return Z;else return new P(W)}function aX(Z){return T8(Z,(W)=>{return W})}function C8(Z,W,X){if(Z)return W;else return X()}function c(Z){return Z}function EW(Z){return JSON.stringify(Z)}function tX(Z){return Object.fromEntries(Z)}function V8(Z){return Z}function eX(Z){let W=[];while(zX(Z))W.push(RX(Z)),Z=IX(Z);return W}function xW(Z){return EW(Z)}function Z0(Z){return V8(Z)}function M9(Z){return V8(Z)}function G8(Z){return tX(Z)}function ZQ(Z){return eX(Z)}function L8(Z,W){let Q=t(Z,W);return ZQ(Q)}var vZ=()=>globalThis?.document,A9="http://www.w3.org/1999/xhtml",P9=1,kW=3;var QQ=!!globalThis.HTMLElement?.prototype?.moveBefore;var f=U([]),B9=new _;var CG=new tZ,LG=new XZ,wG=new QZ;function S9(Z,W){if(Z.name===W.name)return wG;else if(Z.name<W.name)return LG;else return CG}class pZ extends N{constructor(Z,W,X){super();this.kind=Z,this.name=W,this.value=X}}class T9 extends N{constructor(Z,W,X){super();this.kind=Z,this.name=W,this.value=X}}class RZ extends N{constructor(Z,W,X,Q,K,V,G,Y){super();this.kind=Z,this.name=W,this.handler=X,this.include=Q,this.prevent_default=K,this.stop_propagation=V,this.debounce=G,this.throttle=Y}}class w8 extends N{constructor(Z,W,X){super();this.prevent_default=Z,this.stop_propagation=W,this.message=X}}class JQ extends N{constructor(Z){super();this.kind=Z}}class HQ extends N{constructor(Z){super();this.kind=Z}}function gG(Z,W){while(!0){let X=Z,Q=W;if(X instanceof D)return Q;else{let K=X.head;if(K instanceof pZ){let V=K.name;if(V==="")Z=X.tail,W=Q;else if(V==="class"){let G=K.value;if(G==="")Z=X.tail,W=Q;else{let Y=X.tail;if(Y instanceof D){let J=K;Z=Y,W=z(J,Q)}else{let J=Y.head;if(J instanceof pZ)if(J.name==="class"){let F=K.kind,R=G,O=Y.tail,S=J.value,B=R+" "+S,C=new pZ(F,"class",B);Z=z(C,O),W=Q}else{let F=K;Z=Y,W=z(F,Q)}else{let H=K;Z=Y,W=z(H,Q)}}}}else if(V==="style"){let G=K.value;if(G==="")Z=X.tail,W=Q;else{let Y=X.tail;if(Y instanceof D){let J=K;Z=Y,W=z(J,Q)}else{let J=Y.head;if(J instanceof pZ)if(J.name==="style"){let F=K.kind,R=G,O=Y.tail,S=J.value,B=R+";"+S,C=new pZ(F,"style",B);Z=z(C,O),W=Q}else{let F=K;Z=Y,W=z(F,Q)}else{let H=K;Z=Y,W=z(H,Q)}}}}else{let G=K;Z=X.tail,W=z(G,Q)}}else{let V=K;Z=X.tail,W=z(V,Q)}}}}function UQ(Z){if(Z instanceof D)return Z;else if(Z.tail instanceof D)return Z;else{let Q=V9(Z,(K,V)=>{return S9(V,K)});return gG(Q,f)}}var yW=0;function FQ(Z,W){return new pZ(yW,Z,W)}var NQ=1;var gW=2;function zQ(Z,W,X,Q,K,V,G){return new RZ(gW,Z,W,X,Q,K,V,G)}var bW=0;var hW=new JQ(bW);var q9=2,RQ=new HQ(q9);function mZ(Z,W){return FQ(Z,W)}function YZ(Z){return mZ("class",Z)}function IQ(){return YZ("")}function C9(Z){return mZ("id",Z)}function jQ(Z){return mZ("accept",K0(Z,","))}function OQ(Z){return mZ("for",Z)}function DQ(Z){return mZ("name",Z)}function $0(Z){return mZ("type",Z)}function Y8(Z){return mZ("value",Z)}function _G(Z,W){return mZ("aria-"+Z,W)}function MQ(Z){return _G("invalid",Z)}class E8 extends N{constructor(Z,W,X){super();this.synchronous=Z,this.before_paint=W,this.after_paint=X}}class vW extends N{constructor(Z,W,X,Q,K){super();this.dispatch=Z,this.emit=W,this.select=X,this.root=Q,this.provide=K}}function vG(Z,W,X){return}function mG(Z,W){return new vW((X)=>{return Z.dispatch(W(X))},Z.emit,(X)=>{return vG(Z,X,W)},Z.root,Z.provide)}function _W(Z,W){return t(Z,(X)=>{return(Q)=>{return X(mG(Q,W))}})}function AQ(Z,W){return new E8(_W(Z.synchronous,W),_W(Z.before_paint,W),_W(Z.after_paint,W))}function PQ(Z,W,X,Q,K,V){let G=new vW(W,X,Q,K,V);return wX(Z.synchronous,(Y)=>{return Y(G)})}var L9=new E8(U([]),U([]),U([]));function u(){return L9}function x8(Z){return new E8(U([(X)=>{let Q=X.dispatch;return Z(Q)}]),L9.before_paint,L9.after_paint)}function BQ(Z){return zZ(Z,L9,(W,X)=>{return new E8(zZ(X.synchronous,W.synchronous,X9),zZ(X.before_paint,W.before_paint,X9),zZ(X.after_paint,W.after_paint,X9))})}function EZ(){return null}function k8(Z,W){let X=Z?.get(W);if(X!=null)return new j(X);else return new P(void 0)}function f8(Z,W){return Z&&Z.has(W)}function c0(Z,W,X){return Z??=new Map,Z.set(W,X),Z}function mW(Z,W){return Z?.delete(W),Z}class $W extends N{}class cW extends N{constructor(Z,W){super();this.key=Z,this.parent=W}}class SQ extends N{constructor(Z,W){super();this.index=Z,this.parent=W}}function $G(Z,W){while(!0){let X=Z,Q=W;if(Q instanceof D)return!1;else{let{head:K,tail:V}=Q,G=V0(X,K);if(G)return G;else Z=X,W=V}}}function $Z(Z,W,X){if(X==="")return new SQ(W,Z);else return new cW(X,Z)}var J8=new $W,g8="\t";function TQ(Z,W){while(!0){let X=Z,Q=W;if(X instanceof $W)if(Q instanceof D)return"";else{let K=Q.tail;return q8(K)}else if(X instanceof cW){let K=X.key;Z=X.parent,W=z(g8,z(K,Q))}else{let K=X.index;Z=X.parent,W=z(g8,z(a(K),Q))}}}function qQ(Z){return TQ(Z,U([]))}function CQ(Z,W){if(W instanceof D)return!1;else return $G(qQ(Z),W)}var uW=`
`;function dW(Z,W){return TQ(Z,U([uW,W]))}class SZ extends N{constructor(Z,W,X,Q,K){super();this.kind=Z,this.key=W,this.mapper=X,this.children=Q,this.keyed_children=K}}class TZ extends N{constructor(Z,W,X,Q,K,V,G,Y,J,H){super();this.kind=Z,this.key=W,this.mapper=X,this.namespace=Q,this.tag=K,this.attributes=V,this.children=G,this.keyed_children=Y,this.self_closing=J,this.void=H}}class xZ extends N{constructor(Z,W,X,Q){super();this.kind=Z,this.key=W,this.mapper=X,this.content=Q}}class B0 extends N{constructor(Z,W,X,Q,K,V,G){super();this.kind=Z,this.key=W,this.mapper=X,this.namespace=Q,this.tag=K,this.attributes=V,this.inner_html=G}}function b8(Z,W){if(W==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function LQ(Z,W){if(W instanceof SZ)return new SZ(W.kind,Z,W.mapper,W.children,W.keyed_children);else if(W instanceof TZ)return new TZ(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.children,W.keyed_children,W.self_closing,W.void);else if(W instanceof xZ)return new xZ(W.kind,Z,W.mapper,W.content);else return new B0(W.kind,Z,W.mapper,W.namespace,W.tag,W.attributes,W.inner_html)}var sZ=0;function pW(Z,W,X,Q){return new SZ(sZ,Z,W,X,Q)}var u0=1;function h8(Z,W,X,Q,K,V,G,Y,J){return new TZ(u0,Z,W,X,Q,UQ(K),V,G,Y,J)}var H8=2;function sW(Z,W,X){return new xZ(H8,Z,W,X)}var wQ=3;var iW=(Z,W)=>Z===W,iZ=(Z,W)=>{if(Z===W)return!0;if(Z==null||W==null)return!1;let X=typeof Z;if(X!==typeof W)return!1;if(X!=="object")return!1;if(Z.constructor!==W.constructor)return!1;if(Array.isArray(Z))return dG(Z,W);return pG(Z,W)},dG=(Z,W)=>{let X=Z.length;if(X!==W.length)return!1;while(X--)if(!iZ(Z[X],W[X]))return!1;return!0},pG=(Z,W)=>{let X=Object.keys(Z),Q=X.length;if(Object.keys(W).length!==Q)return!1;while(Q--){let K=X[Q];if(!Object.hasOwn(W,K))return!1;if(!iZ(Z[K],W[K]))return!1}return!0};class U0 extends N{constructor(Z,W,X){super();this.handlers=Z,this.dispatched_paths=W,this.next_dispatched_paths=X}}class rW extends N{constructor(Z,W){super();this.path=Z,this.handler=W}}class nW extends N{constructor(Z){super();this.path=Z}}function aW(){return new U0(EZ(),f,f)}function fQ(Z){return new U0(Z.handlers,Z.next_dispatched_paths,f)}function yQ(Z,W,X){return mW(Z,dW(W,X))}function E9(Z,W,X){let Q=yQ(Z.handlers,W,X);return new U0(Q,Z.dispatched_paths,Z.next_dispatched_paths)}function EQ(Z,W,X){return zZ(X,Z,(Q,K)=>{if(K instanceof RZ){let V=K.name;return yQ(Q,W,V)}else return Q})}function oW(Z,W,X,Q){let K=k8(Z.handlers,W+uW+X);if(K instanceof j){let V=K[0],G=A0(Q,V);if(G instanceof j){let Y=G[0];return new rW(W,Y)}else return new nW(W)}else return new nW(W)}function tW(Z,W){let X=z(W.path,Z.next_dispatched_paths),Q=new U0(Z.handlers,Z.dispatched_paths,X);if(W instanceof rW){let K=W.handler;return[Q,new j(K)]}else return[Q,new P(void 0)]}function x9(Z,W,X,Q){let K=oW(Z,W,X,Q);return((V)=>{return tW(Z,V)})(K)}function k9(Z,W){return CQ(W,Z.dispatched_paths)}function gQ(Z,W,X,Q,K){return c0(Z,dW(X,Q),h0(K,(V)=>{return new w8(V.prevent_default,V.stop_propagation,c(W)(V.message))}))}function U8(Z,W,X,Q,K){let V=gQ(Z.handlers,W,X,Q,K);return new U0(V,Z.dispatched_paths,Z.next_dispatched_paths)}function xQ(Z,W,X,Q){return zZ(Q,Z,(K,V)=>{if(V instanceof RZ){let{name:G,handler:Y}=V;return gQ(K,W,X,G,Y)}else return K})}function H0(Z,W){let X=iW(Z,c);if(iW(W,c))return Z;else if(X)return W;else return(K)=>{return Z(W(K))}}function kQ(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(Y instanceof D)return K;else{let{head:J,tail:H}=Y;Z=bQ(K,V,G,J),W=V,X=G+1,Q=H}}}function bQ(Z,W,X,Q){if(Q instanceof SZ){let K=Q.children,V=$Z(W,X,Q.key);return kQ(Z,V,0,K)}else if(Q instanceof TZ){let{attributes:K,children:V}=Q,G=$Z(W,X,Q.key),J=EQ(Z,G,K);return kQ(J,G,0,V)}else if(Q instanceof xZ)return Z;else{let K=Q.attributes,V=$Z(W,X,Q.key);return EQ(Z,V,K)}}function F0(Z,W,X,Q){let K=bQ(Z.handlers,W,X,Q);return new U0(K,Z.dispatched_paths,Z.next_dispatched_paths)}function lW(Z,W,X,Q,K){while(!0){let V=Z,G=W,Y=X,J=Q,H=K;if(H instanceof D)return V;else{let{head:F,tail:R}=H;Z=hQ(V,G,Y,J,F),W=G,X=Y,Q=J+1,K=R}}}function hQ(Z,W,X,Q,K){if(K instanceof SZ){let V=K.children,G=$Z(X,Q,K.key),Y=H0(W,K.mapper);return lW(Z,Y,G,0,V)}else if(K instanceof TZ){let{attributes:V,children:G}=K,Y=$Z(X,Q,K.key),J=H0(W,K.mapper),F=xQ(Z,J,Y,V);return lW(F,J,Y,0,G)}else if(K instanceof xZ)return Z;else{let V=K.attributes,G=$Z(X,Q,K.key),Y=H0(W,K.mapper);return xQ(Z,Y,G,V)}}function N0(Z,W,X,Q,K){let V=hQ(Z.handlers,W,X,Q,K);return new U0(V,Z.dispatched_paths,Z.next_dispatched_paths)}function eW(Z){return N0(aW(),c,J8,0,Z)}function _Q(Z,W,X,Q,K){let V=lW(Z.handlers,W,X,Q,K);return new U0(V,Z.dispatched_paths,Z.next_dispatched_paths)}function JZ(Z,W,X){return h8("",c,"",Z,W,X,EZ(),!1,b8(Z,""))}function f9(Z){return sW("",c,Z)}function vQ(){return sW("",c,"")}function Z6(Z,W){let X=c(H0(c(W),Z.mapper));if(Z instanceof SZ){let{children:Q,keyed_children:K}=Z;return new SZ(Z.kind,Z.key,X,c(Q),c(K))}else if(Z instanceof TZ){let{attributes:Q,children:K,keyed_children:V}=Z;return new TZ(Z.kind,Z.key,X,Z.namespace,Z.tag,c(Q),c(K),c(V),Z.self_closing,Z.void)}else if(Z instanceof xZ)return c(Z);else{let Q=Z.attributes;return new B0(Z.kind,Z.key,X,Z.namespace,Z.tag,c(Q),Z.inner_html)}}function $(Z){return f9(Z)}function mQ(Z,W){return JZ("h2",Z,W)}function qZ(Z,W){return JZ("div",Z,W)}function cZ(Z,W){return JZ("li",Z,W)}function $Q(Z,W){return JZ("ol",Z,W)}function _8(Z,W){return JZ("p",Z,W)}function W6(Z,W){return JZ("ul",Z,W)}function cQ(Z,W){return JZ("span",Z,W)}function uQ(Z,W){return JZ("table",Z,W)}function v8(Z,W){return JZ("td",Z,W)}function m8(Z,W){return JZ("th",Z,W)}function dQ(Z,W){return JZ("thead",Z,W)}function X6(Z,W){return JZ("tr",Z,W)}function z0(Z,W){return JZ("button",Z,W)}function y9(Z,W){return JZ("form",Z,W)}function p0(Z){return JZ("input",Z,f)}function pQ(Z,W){return JZ("label",Z,W)}class c8 extends N{constructor(Z,W,X,Q){super();this.index=Z,this.removed=W,this.changes=X,this.children=Q}}class sQ extends N{constructor(Z,W){super();this.kind=Z,this.content=W}}class iQ extends N{constructor(Z,W){super();this.kind=Z,this.inner_html=W}}class nQ extends N{constructor(Z,W,X){super();this.kind=Z,this.added=W,this.removed=X}}class lQ extends N{constructor(Z,W,X){super();this.kind=Z,this.key=W,this.before=X}}class rQ extends N{constructor(Z,W,X){super();this.kind=Z,this.index=W,this.with=X}}class aQ extends N{constructor(Z,W){super();this.kind=Z,this.index=W}}class oQ extends N{constructor(Z,W,X){super();this.kind=Z,this.children=W,this.before=X}}function Q6(Z,W,X,Q){return new c8(Z,W,X,Q)}var K6=0;function tQ(Z){return new sQ(K6,Z)}var V6=1;function eQ(Z){return new iQ(V6,Z)}var G6=2;function Y6(Z,W){return new nQ(G6,Z,W)}var J6=3;function ZK(Z,W){return new lQ(J6,Z,W)}var H6=4;function WK(Z){return new aQ(H6,Z)}var U6=5;function s0(Z,W){return new rQ(U6,Z,W)}var F6=6;function N6(Z,W){return new oQ(F6,Z,W)}class QK extends N{constructor(Z,W,X,Q,K,V,G,Y){super();this.kind=Z,this.open_shadow_root=W,this.will_adopt_styles=X,this.observed_attributes=Q,this.observed_properties=K,this.requested_contexts=V,this.provided_contexts=G,this.vdom=Y}}class KK extends N{constructor(Z,W){super();this.kind=Z,this.patch=W}}class VK extends N{constructor(Z,W,X){super();this.kind=Z,this.name=W,this.data=X}}class GK extends N{constructor(Z,W,X){super();this.kind=Z,this.key=W,this.value=X}}class g9 extends N{constructor(Z,W){super();this.kind=Z,this.messages=W}}class b9 extends N{constructor(Z,W,X){super();this.kind=Z,this.name=W,this.value=X}}class h9 extends N{constructor(Z,W,X){super();this.kind=Z,this.name=W,this.value=X}}class _9 extends N{constructor(Z,W,X,Q){super();this.kind=Z,this.path=W,this.name=X,this.event=Q}}class z6 extends N{constructor(Z,W,X){super();this.kind=Z,this.key=W,this.value=X}}var nG=0;function YK(Z,W,X,Q,K,V,G){return new QK(nG,Z,W,X,Q,K,V,G)}var lG=1;function R6(Z){return new KK(lG,Z)}var rG=2;function JK(Z,W){return new VK(rG,Z,W)}var aG=3;function HK(Z,W){return new GK(aG,Z,W)}class v9 extends N{constructor(Z,W){super();this.patch=Z,this.events=W}}class NK extends N{constructor(Z,W,X){super();this.added=Z,this.removed=W,this.events=X}}function oG(Z,W,X,Q){if(X==="input"&&W==="")return k9(Z,Q);else if(X==="select"&&W==="")return k9(Z,Q);else if(X==="textarea"&&W==="")return k9(Z,Q);else return!1}function FK(Z,W,X,Q,K,V,G,Y){while(!0){let J=Z,H=W,F=X,R=Q,O=K,S=V,B=G,C=Y;if(O instanceof D)if(S instanceof D)return new NK(B,C,R);else{let A=S.head;if(A instanceof RZ){let T=A,M=S.tail,q=A.name,x=A.handler,I=z(T,B),w=U8(R,F,H,q,x);Z=J,W=H,X=F,Q=w,K=O,V=M,G=I,Y=C}else{let T=A,M=S.tail,q=z(T,B);Z=J,W=H,X=F,Q=R,K=O,V=M,G=q,Y=C}}else if(S instanceof D){let A=O.head;if(A instanceof RZ){let T=A,M=O.tail,q=A.name,x=z(T,C),I=E9(R,H,q);Z=J,W=H,X=F,Q=I,K=M,V=S,G=B,Y=x}else{let T=A,M=O.tail,q=z(T,C);Z=J,W=H,X=F,Q=R,K=M,V=S,G=B,Y=q}}else{let{head:A,tail:T}=O,M=S.head,q=S.tail,x=S9(A,M);if(x instanceof XZ)if(A instanceof RZ){let I=A.name,w=z(A,C),E=E9(R,H,I);Z=J,W=H,X=F,Q=E,K=T,V=S,G=B,Y=w}else{let I=z(A,C);Z=J,W=H,X=F,Q=R,K=T,V=S,G=B,Y=I}else if(x instanceof QZ)if(A instanceof pZ)if(M instanceof pZ){let I,w=M.name;if(w==="value")I=J||A.value!==M.value;else if(w==="checked")I=J||A.value!==M.value;else if(w==="selected")I=J||A.value!==M.value;else I=A.value!==M.value;let E=I,k;if(E)k=z(M,B);else k=B;let y=k;Z=J,W=H,X=F,Q=R,K=T,V=q,G=y,Y=C}else if(M instanceof RZ){let{name:I,handler:w}=M,E=z(M,B),k=z(A,C),y=U8(R,F,H,I,w);Z=J,W=H,X=F,Q=y,K=T,V=q,G=E,Y=k}else{let I=z(M,B),w=z(A,C);Z=J,W=H,X=F,Q=R,K=T,V=q,G=I,Y=w}else if(A instanceof T9)if(M instanceof T9){let I,w=M.name;if(w==="scrollLeft")I=!0;else if(w==="scrollRight")I=!0;else if(w==="value")I=J||!iZ(A.value,M.value);else if(w==="checked")I=J||!iZ(A.value,M.value);else if(w==="selected")I=J||!iZ(A.value,M.value);else I=!iZ(A.value,M.value);let E=I,k;if(E)k=z(M,B);else k=B;let y=k;Z=J,W=H,X=F,Q=R,K=T,V=q,G=y,Y=C}else if(M instanceof RZ){let{name:I,handler:w}=M,E=z(M,B),k=z(A,C),y=U8(R,F,H,I,w);Z=J,W=H,X=F,Q=y,K=T,V=q,G=E,Y=k}else{let I=z(M,B),w=z(A,C);Z=J,W=H,X=F,Q=R,K=T,V=q,G=I,Y=w}else if(M instanceof RZ){let{name:I,handler:w}=M,E=A.prevent_default.kind!==M.prevent_default.kind||A.stop_propagation.kind!==M.stop_propagation.kind||A.debounce!==M.debounce||A.throttle!==M.throttle,k;if(E)k=z(M,B);else k=B;let y=k,v=U8(R,F,H,I,w);Z=J,W=H,X=F,Q=v,K=T,V=q,G=y,Y=C}else{let I=A.name,w=z(M,B),E=z(A,C),k=E9(R,H,I);Z=J,W=H,X=F,Q=k,K=T,V=q,G=w,Y=E}else if(M instanceof RZ){let{name:I,handler:w}=M,E=z(M,B),k=U8(R,F,H,I,w);Z=J,W=H,X=F,Q=k,K=O,V=q,G=E,Y=C}else{let I=z(M,B);Z=J,W=H,X=F,Q=R,K=O,V=q,G=I,Y=C}}}}function I6(Z,W,X,Q,K,V,G,Y,J,H,F,R,O,S){while(!0){let B=Z,C=W,A=X,T=Q,M=K,q=V,x=G,I=Y,w=J,E=H,k=F,y=R,v=O,GZ=S;if(B instanceof D)if(A instanceof D)return new v9(new c8(w,x,k,y),GZ);else{let uZ=_Q(GZ,v,E,I,A),kZ=N6(A,I-q),e=z(kZ,k);return new v9(new c8(w,x,e,y),uZ)}else if(A instanceof D){let{head:uZ,tail:kZ}=B,e;if(uZ.key===""||!f8(M,uZ.key))e=x+1;else e=x;let d=e,s=F0(GZ,E,I,uZ);Z=kZ,W=C,X=A,Q=T,K=M,V=q,G=d,Y=I,J=w,H=E,F=k,R=y,O=v,S=s}else{let uZ=B.head,kZ=A.head;if(uZ.key!==kZ.key){let e=B.tail,ZZ=A.tail,d=k8(C,kZ.key);if(f8(T,uZ.key))if(d instanceof j){let g=d[0];if(f8(M,uZ.key))Z=e,W=C,X=A,Q=T,K=M,V=q-1,G=x,Y=I,J=w,H=E,F=k,R=y,O=v,S=GZ;else{let i=I-q,m=z(ZK(kZ.key,i),k),WZ=c0(M,kZ.key,void 0),n=q+1;Z=z(g,B),W=C,X=A,Q=T,K=WZ,V=n,G=x,Y=I,J=w,H=E,F=m,R=y,O=v,S=GZ}}else{let g=I-q,p=N0(GZ,v,E,I,kZ),i=N6(U([kZ]),g),m=z(i,k);Z=B,W=C,X=ZZ,Q=T,K=M,V=q+1,G=x,Y=I+1,J=w,H=E,F=m,R=y,O=v,S=p}else if(d instanceof j){let g=I-q,p=z(WK(g),k),i=F0(GZ,E,I,uZ),m=q-1;Z=e,W=C,X=A,Q=T,K=M,V=m,G=x,Y=I,J=w,H=E,F=p,R=y,O=v,S=i}else{let g=s0(I-q,kZ),p,m=F0(GZ,E,I,uZ);p=N0(m,v,E,I,kZ);let WZ=p;Z=e,W=C,X=ZZ,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(g,k),R=y,O=v,S=WZ}}else{let e=B.head;if(e instanceof SZ){let ZZ=A.head;if(ZZ instanceof SZ){let d=e,s=B.tail,g=ZZ,p=A.tail,i=H0(v,g.mapper),m=$Z(E,I,g.key),WZ=I6(d.children,d.keyed_children,g.children,g.keyed_children,EZ(),0,0,0,I,m,f,f,i,GZ),n,KZ=WZ.patch;if(KZ.changes instanceof D)if(KZ.children instanceof D)if(KZ.removed===0)n=y;else n=z(WZ.patch,y);else n=z(WZ.patch,y);else n=z(WZ.patch,y);let rZ=n;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=k,R=rZ,O=v,S=WZ.events}else{let d=e,s=B.tail,g=ZZ,p=A.tail,i=s0(I-q,g),m,n=F0(GZ,E,I,d);m=N0(n,v,E,I,g);let KZ=m;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(i,k),R=y,O=v,S=KZ}}else if(e instanceof TZ){let ZZ=A.head;if(ZZ instanceof TZ){let d=e,s=ZZ;if(d.namespace===s.namespace&&d.tag===s.tag){let g=B.tail,p=A.tail,i=H0(v,s.mapper),m=$Z(E,I,s.key),WZ=oG(GZ,s.namespace,s.tag,m),n=FK(WZ,m,i,GZ,d.attributes,s.attributes,f,f),KZ,Q0,rZ;KZ=n.added,Q0=n.removed,rZ=n.events;let L0;if(KZ instanceof D&&Q0 instanceof D)L0=f;else L0=U([Y6(KZ,Q0)]);let o0=L0,t0=I6(d.children,d.keyed_children,s.children,s.keyed_children,EZ(),0,0,0,I,m,o0,f,i,rZ),O0,w0=t0.patch;if(w0.changes instanceof D)if(w0.children instanceof D)if(w0.removed===0)O0=y;else O0=z(t0.patch,y);else O0=z(t0.patch,y);else O0=z(t0.patch,y);let X7=O0;Z=g,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=k,R=X7,O=v,S=t0.events}else{let g=e,p=B.tail,i=ZZ,m=A.tail,WZ=s0(I-q,i),n,Q0=F0(GZ,E,I,g);n=N0(Q0,v,E,I,i);let rZ=n;Z=p,W=C,X=m,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(WZ,k),R=y,O=v,S=rZ}}else{let d=e,s=B.tail,g=ZZ,p=A.tail,i=s0(I-q,g),m,n=F0(GZ,E,I,d);m=N0(n,v,E,I,g);let KZ=m;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(i,k),R=y,O=v,S=KZ}}else if(e instanceof xZ){let ZZ=A.head;if(ZZ instanceof xZ){let d=e,s=ZZ;if(d.content===s.content){let g=B.tail,p=A.tail;Z=g,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=k,R=y,O=v,S=GZ}else{let g=B.tail,p=ZZ,i=A.tail,m=Q6(I,0,U([tQ(p.content)]),f);Z=g,W=C,X=i,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=k,R=z(m,y),O=v,S=GZ}}else{let d=e,s=B.tail,g=ZZ,p=A.tail,i=s0(I-q,g),m,n=F0(GZ,E,I,d);m=N0(n,v,E,I,g);let KZ=m;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(i,k),R=y,O=v,S=KZ}}else{let ZZ=A.head;if(ZZ instanceof B0){let d=e,s=B.tail,g=ZZ,p=A.tail,i=H0(v,g.mapper),m=$Z(E,I,g.key),WZ=FK(!1,m,i,GZ,d.attributes,g.attributes,f,f),n,KZ,Q0;n=WZ.added,KZ=WZ.removed,Q0=WZ.events;let rZ;if(n instanceof D&&KZ instanceof D)rZ=f;else rZ=U([Y6(n,KZ)]);let L0=rZ,o0;if(d.inner_html===g.inner_html)o0=L0;else o0=z(eQ(g.inner_html),L0);let O0=o0,w0;if(O0 instanceof D)w0=y;else w0=z(Q6(I,0,O0,U([])),y);let JX=w0;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=k,R=JX,O=v,S=Q0}else{let d=e,s=B.tail,g=ZZ,p=A.tail,i=s0(I-q,g),m,n=F0(GZ,E,I,d);m=N0(n,v,E,I,g);let KZ=m;Z=s,W=C,X=p,Q=T,K=M,V=q,G=x,Y=I+1,J=w,H=E,F=z(i,k),R=y,O=v,S=KZ}}}}}}function F8(Z,W,X){return I6(U([W]),EZ(),U([X]),EZ(),EZ(),0,0,0,0,J8,f,f,c,fQ(Z))}var{setTimeout:tG,clearTimeout:j6}=globalThis,eG=(Z,W)=>vZ().createElementNS(Z,W),ZY=(Z)=>vZ().createTextNode(Z),WY=()=>vZ().createDocumentFragment(),N8=(Z,W,X)=>Z.insertBefore(W,X),RK=QQ?(Z,W,X)=>Z.moveBefore(W,X):N8,XY=(Z,W)=>Z.removeChild(W),QY=(Z,W)=>Z.getAttribute(W),IK=(Z,W,X)=>Z.setAttribute(W,X),KY=(Z,W)=>Z.removeAttribute(W),VY=(Z,W,X,Q)=>Z.addEventListener(W,X,Q),jK=(Z,W,X)=>Z.removeEventListener(W,X),GY=(Z,W)=>Z.innerHTML=W,YY=(Z,W)=>Z.data=W,R0=Symbol("lustre");class MK{constructor(Z,W,X,Q){this.kind=Z,this.key=Q,this.parent=W,this.children=[],this.node=X,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===sZ?this.node.parentNode:this.node}}var I0=(Z,W,X,Q,K)=>{let V=new MK(Z,W,X,K);return X[R0]=V,W?.children.splice(Q,0,V),V},JY=(Z)=>{let W="";for(let X=Z[R0];X.parent;X=X.parent)if(X.key)W=`${g8}${X.key}${W}`;else{let Q=X.parent.children.indexOf(X);W=`${g8}${Q}${W}`}return W.slice(1)};class D6{#Z=null;#K;#X;#Q=!1;constructor(Z,W,X,{exposeKeys:Q=!1}={}){this.#Z=Z,this.#K=W,this.#X=X,this.#Q=Q}mount(Z){I0(u0,null,this.#Z,0,null),this.#D(this.#Z,null,this.#Z[R0],0,Z)}push(Z){this.#W.push({node:this.#Z[R0],patch:Z}),this.#V()}#W=[];#V(){let Z=this.#W;while(Z.length){let{node:W,patch:X}=Z.pop(),{children:Q}=W,{changes:K,removed:V,children:G}=X;if(i0(K,(Y)=>this.#G(W,Y)),V)this.#N(W,Q.length-V,V);i0(G,(Y)=>{let J=Q[Y.index|0];this.#W.push({node:J,patch:Y})})}}#G(Z,W){switch(W.kind){case K6:this.#S(Z,W);break;case V6:this.#M(Z,W);break;case G6:this.#R(Z,W);break;case J6:this.#U(Z,W);break;case H6:this.#j(Z,W);break;case U6:this.#F(Z,W);break;case F6:this.#J(Z,W);break}}#J(Z,{children:W,before:X}){let Q=WY(),K=this.#H(Z,X);this.#O(Q,null,Z,X|0,W),N8(Z.parentNode,Q,K)}#F(Z,{index:W,with:X}){this.#N(Z,W|0,1);let Q=this.#H(Z,W);this.#D(Z.parentNode,Q,Z,W|0,X)}#H(Z,W){W=W|0;let{children:X}=Z,Q=X.length;if(W<Q)return X[W].node;let K=X[Q-1];if(!K&&Z.kind!==sZ)return null;if(!K)K=Z;while(K.kind===sZ&&K.children.length)K=K.children[K.children.length-1];return K.node.nextSibling}#U(Z,{key:W,before:X}){X=X|0;let{children:Q,parentNode:K}=Z,V=Q[X].node,G=Q[X];for(let F=X+1;F<Q.length;++F){let R=Q[F];if(Q[F]=G,G=R,R.key===W){Q[X]=R;break}}let{kind:Y,node:J,children:H}=G;if(RK(K,J,V),Y===sZ)this.#Y(K,H,V)}#Y(Z,W,X){for(let Q=0;Q<W.length;++Q){let{kind:K,node:V,children:G}=W[Q];if(RK(Z,V,X),K===sZ)this.#Y(Z,G,X)}}#j(Z,{index:W}){this.#N(Z,W,1)}#N(Z,W,X){let{children:Q,parentNode:K}=Z,V=Q.splice(W,X);for(let G=0;G<V.length;++G){let{kind:Y,node:J,children:H}=V[G];if(XY(K,J),this.#z(V[G]),Y===sZ)V.push(...H)}}#z(Z){let{debouncers:W,children:X}=Z;for(let{timeout:Q}of W.values())if(Q)j6(Q);W.clear(),i0(X,(Q)=>this.#z(Q))}#R({node:Z,handlers:W,throttles:X,debouncers:Q},{added:K,removed:V}){i0(V,({name:G})=>{if(W.delete(G))jK(Z,G,O6),this.#I(X,G,0),this.#I(Q,G,0);else KY(Z,G),DK[G]?.removed?.(Z,G)}),i0(K,(G)=>this.#B(Z,G))}#S({node:Z},{content:W}){YY(Z,W??"")}#M({node:Z},{inner_html:W}){GY(Z,W??"")}#O(Z,W,X,Q,K){i0(K,(V)=>this.#D(Z,W,X,Q++,V))}#D(Z,W,X,Q,K){switch(K.kind){case u0:{let V=this.#A(X,Q,K);this.#O(V,null,V[R0],0,K.children),N8(Z,V,W);break}case H8:{let V=this.#P(X,Q,K);N8(Z,V,W);break}case sZ:{let V=this.#P(X,Q,K);N8(Z,V,W),this.#O(Z,W,V[R0],0,K.children);break}case wQ:{let V=this.#A(X,Q,K);this.#M({node:V},K),N8(Z,V,W);break}}}#A(Z,W,{kind:X,key:Q,tag:K,namespace:V,attributes:G}){let Y=eG(V||A9,K);if(I0(X,Z,Y,W,Q),this.#Q&&Q)IK(Y,"data-lustre-key",Q);return i0(G,(J)=>this.#B(Y,J)),Y}#P(Z,W,{kind:X,key:Q,content:K}){let V=ZY(K??"");return I0(X,Z,V,W,Q),V}#B(Z,W){let{debouncers:X,handlers:Q,throttles:K}=Z[R0],{kind:V,name:G,value:Y,prevent_default:J,debounce:H,throttle:F}=W;switch(V){case yW:{let R=Y??"";if(G==="virtual:defaultValue"){Z.defaultValue=R;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(R!==QY(Z,G))IK(Z,G,R);DK[G]?.added?.(Z,R);break}case NQ:Z[G]=Y;break;case gW:{if(Q.has(G))jK(Z,G,O6);let R=J.kind===bW;VY(Z,G,O6,{passive:R}),this.#I(K,G,F),this.#I(X,G,H),Q.set(G,(O)=>this.#T(W,O));break}}}#I(Z,W,X){let Q=Z.get(W);if(X>0)if(Q)Q.delay=X;else Z.set(W,{delay:X});else if(Q){let{timeout:K}=Q;if(K)j6(K);Z.delete(W)}}#T(Z,W){let{currentTarget:X,type:Q}=W,{debouncers:K,throttles:V}=X[R0],G=JY(X),{prevent_default:Y,stop_propagation:J,include:H}=Z;if(Y.kind===q9)W.preventDefault();if(J.kind===q9)W.stopPropagation();if(Q==="submit")W.detail??={},W.detail.formData=[...new FormData(W.target,W.submitter).entries()];let F=this.#K(W,G,Q,H),R=V.get(Q);if(R){let S=Date.now(),B=R.last||0;if(S>B+R.delay)R.last=S,R.lastEvent=W,this.#X(W,F)}let O=K.get(Q);if(O)j6(O.timeout),O.timeout=tG(()=>{if(W===V.get(Q)?.lastEvent)return;this.#X(W,F)},O.delay);if(!R&&!O)this.#X(W,F)}}var i0=(Z,W)=>{if(Array.isArray(Z))for(let X=0;X<Z.length;X++)W(Z[X]);else if(Z)for(Z;Z.head;Z=Z.tail)W(Z.head)},O6=(Z)=>{let{currentTarget:W,type:X}=Z;W[R0].handlers.get(X)(Z)},OK=(Z)=>{return{added(W){W[Z]=!0},removed(W){W[Z]=!1}}},HY=(Z)=>{return{added(W,X){W[Z]=X}}},DK={checked:OK("checked"),selected:OK("selected"),value:HY("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(W){console.error(W)}}}};function UY(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q instanceof D)return[K,b(V)];else{let G=Q.tail,Y=Q.head[0],J=Q.head[1],H=LQ(Y,J),F;if(Y==="")F=K;else F=c0(K,Y,H);let R=F,O=z(H,V);Z=G,W=R,X=O}}}function M6(Z){return UY(Z,EZ(),f)}function A6(Z,W,X){let Q=M6(X),K,V;return K=Q[0],V=Q[1],h8("",c,"",Z,W,V,K,!1,b8(Z,""))}function AK(Z,W,X,Q){let K=M6(Q),V,G;return V=K[0],G=K[1],h8("",c,Z,W,X,G,V,!1,b8(W,Z))}function PK(Z){let W=M6(Z),X,Q;return X=W[0],Q=W[1],pW("",c,Q,X)}function BK(Z,W){return A6("tbody",Z,W)}var SK=(Z)=>{let W=I0(u0,null,Z,0,null),X=0;for(let G=Z.firstChild;G;G=G.nextSibling)if(TK(G))X+=1;if(X===0){let G=vZ().createTextNode("");return I0(H8,W,G,0,null),Z.replaceChildren(G),vQ()}if(X===1)return P6(W,Z).head[1];let Q=vZ().createTextNode(""),K=I0(sZ,W,Q,0,null),V=P6(K,Z);return Z.insertBefore(Q,Z.firstChild),PK(V)},TK=(Z)=>{switch(Z.nodeType){case P9:return!0;case kW:return!!Z.data;default:return!1}},NY=(Z,W,X,Q)=>{if(!TK(W))return null;switch(W.nodeType){case P9:{let K=I0(u0,Z,W,Q,X),V=W.localName,G=W.namespaceURI,Y=!G||G===A9;if(Y&&zY.includes(V))RY(V,W);let J=IY(W),H=P6(K,W);return Y?A6(V,J,H):AK(G,V,J,H)}case kW:return I0(H8,Z,W,Q,null),f9(W.data);default:return null}},zY=["input","select","textarea"],RY=(Z,W)=>{let{value:X,checked:Q}=W;if(Z==="input"&&W.type==="checkbox"&&!Q)return;if(Z==="input"&&W.type==="radio"&&!Q)return;if(W.type!=="checkbox"&&W.type!=="radio"&&!X)return;queueMicrotask(()=>{if(W.value=X,W.checked=Q,W.dispatchEvent(new Event("input",{bubbles:!0})),W.dispatchEvent(new Event("change",{bubbles:!0})),vZ().activeElement!==W)W.dispatchEvent(new Event("blur",{bubbles:!0}))})},P6=(Z,W)=>{let X=null,Q=W.firstChild,K=null,V=0;while(Q){let G=Q.nodeType===P9?Q.getAttribute("data-lustre-key"):null;if(G!=null)Q.removeAttribute("data-lustre-key");let Y=NY(Z,Q,G,V),J=Q.nextSibling;if(Y){let H=new CZ([G??"",Y],null);if(K)K=K.tail=H;else K=X=H;V+=1}else W.removeChild(Q);Q=J}if(!K)return f;return K.tail=f,X},IY=(Z)=>{let W=Z.attributes.length,X=f;while(W-- >0){let Q=Z.attributes[W];if(Q.name==="xmlns")continue;X=new CZ(jY(Q),X)}return X},jY=(Z)=>{let{localName:W,value:X}=Z;return mZ(W,X)};var u8=()=>!!vZ();class m9{constructor(Z,[W,X],Q,K){this.root=Z,this.#Z=W,this.#K=Q,this.#X=K,this.root.addEventListener("context-request",(Y)=>{if(!(Y.context&&Y.callback))return;if(!this.#G.has(Y.context))return;Y.stopImmediatePropagation();let J=this.#G.get(Y.context);if(Y.subscribe){let H=()=>{J.subscribers=J.subscribers.filter((F)=>F!==Y.callback)};J.subscribers.push([Y.callback,H]),Y.callback(J.value,H)}else Y.callback(J.value)});let V=(Y,J,H)=>oW(this.#W,J,H,Y),G=(Y,J)=>{let[H,F]=tW(this.#W,J);if(this.#W=H,F.isOk()){let R=F[0];if(R.stop_propagation)Y.stopPropagation();if(R.prevent_default)Y.preventDefault();this.dispatch(R.message,!1)}};this.#V=new D6(this.root,V,G),this.#Q=SK(this.root),this.#W=aW(),this.#z(X),this.#R()}root=null;dispatch(Z,W=!1){if(this.#J)this.#F.push(Z);else{let[X,Q]=this.#X(this.#Z,Z);this.#Z=X,this.#N(Q,W)}}emit(Z,W){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:W,bubbles:!0,composed:!0}))}provide(Z,W){if(!this.#G.has(Z))this.#G.set(Z,{value:W,subscribers:[]});else{let X=this.#G.get(Z);if(iZ(X.value,W))return;X.value=W;for(let Q=X.subscribers.length-1;Q>=0;Q--){let[K,V]=X.subscribers[Q];if(!K){X.subscribers.splice(Q,1);continue}K(W,V)}}}#Z;#K;#X;#Q;#W;#V;#G=new Map;#J=!1;#F=[];#H=f;#U=f;#Y=null;#j={dispatch:(Z)=>this.dispatch(Z),emit:(Z,W)=>this.emit(Z,W),select:()=>{},root:()=>this.root,provide:(Z,W)=>this.provide(Z,W)};#N(Z,W=!1){if(this.#z(Z),!this.#Y)if(W)this.#Y="sync",queueMicrotask(()=>this.#R());else this.#Y=requestAnimationFrame(()=>this.#R())}#z(Z){this.#J=!0;while(!0){for(let X=Z.synchronous;X.tail;X=X.tail)X.head(this.#j);if(this.#H=CK(this.#H,Z.before_paint),this.#U=CK(this.#U,Z.after_paint),!this.#F.length)break;let W=this.#F.shift();[this.#Z,Z]=this.#X(this.#Z,W)}this.#J=!1}#R(){this.#Y=null;let Z=this.#K(this.#Z),{patch:W,events:X}=F8(this.#W,this.#Q,Z);if(this.#W=X,this.#Q=Z,this.#V.push(W),this.#H instanceof CZ){let Q=qK(this.#H);this.#H=f,queueMicrotask(()=>{this.#N(Q,!0)})}if(this.#U instanceof CZ){let Q=qK(this.#U);this.#U=f,requestAnimationFrame(()=>{this.#N(Q,!0)})}}}function qK(Z){return{synchronous:Z,after_paint:f,before_paint:f}}function CK(Z,W){if(Z instanceof D)return W;else if(W instanceof D)return Z;else return NZ(Z,W)}class S6 extends N{constructor(Z){super();this.message=Z}}class T6 extends N{constructor(Z){super();this.callback=Z}}class q6 extends N{constructor(Z){super();this.callback=Z}}class T0 extends N{constructor(Z){super();this.message=Z}}class n0 extends N{constructor(Z,W){super();this.name=Z,this.data=W}}class $9 extends N{constructor(Z,W){super();this.key=Z,this.value=W}}class l0 extends N{}class wK extends N{constructor(Z,W,X,Q,K,V,G,Y,J,H){super();this.open_shadow_root=Z,this.adopt_styles=W,this.delegates_focus=X,this.attributes=Q,this.properties=K,this.contexts=V,this.is_form_associated=G,this.on_form_autofill=Y,this.on_form_reset=J,this.on_form_restore=H}}function EK(Z){let W=new wK(!0,!0,!1,f,f,f,!1,B9,B9,B9);return zZ(Z,W,(X,Q)=>{return Q.apply(X)})}class kK{#Z;constructor(Z,[W,X],Q,K){this.#Z=new m9(Z,[W,X],K,Q)}send(Z){switch(Z.constructor){case T0:{this.dispatch(Z.message,!1);break}case n0:{this.emit(Z.name,Z.data);break}case l0:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,W){this.#Z.emit(Z,W)}}var fK=({init:Z,update:W,view:X},Q,K)=>{if(!u8())return new P(new d8);let V=Q instanceof HTMLElement?Q:vZ().querySelector(Q);if(!V)return new P(new C6(Q));return new j(new kK(V,Z(K),W,X))};class OY{#Z;#K;#X;#Q;#W;#V;#G=D0();#J=new Set;constructor([Z,W],X,Q,K){this.#Z=Z,this.#K=X,this.#X=Q,this.#Q=K,this.#W=this.#X(this.#Z),this.#V=eW(this.#W),this.#Y(W)}send(Z){switch(Z.constructor){case S6:{let{message:W}=Z,X=this.#F(W),Q=F8(this.#V,this.#W,X);this.#W=X,this.#V=Q.events,this.broadcast(R6(Q.patch));return}case T6:{let{callback:W}=Z;this.#J.add(W),W(YK(this.#Q.open_shadow_root,this.#Q.adopt_styles,Q8(this.#Q.attributes),Q8(this.#Q.properties),Q8(this.#Q.contexts),this.#G,this.#W));return}case q6:{let{callback:W}=Z;this.#J.delete(W);return}case T0:{let{message:W}=Z,[X,Q]=this.#K(this.#Z,W),K=this.#X(X),V=F8(this.#V,this.#W,K);this.#Y(Q),this.#Z=X,this.#W=K,this.#V=V.events,this.broadcast(R6(V.patch));return}case n0:{let{name:W,data:X}=Z;this.broadcast(JK(W,X));return}case $9:{let{key:W,value:X}=Z,Q=OZ(this.#G,W);if(Q.isOk()&&iZ(Q[0],X))return;this.#G=y0(this.#G,W,X),this.broadcast(HK(W,X));return}case l0:{this.#Z=null,this.#K=null,this.#X=null,this.#Q=null,this.#W=null,this.#V=null,this.#G=null,this.#J.clear();return}default:return}}broadcast(Z){for(let W of this.#J)W(Z)}#F(Z){switch(Z.constructor){case g9:{let{messages:W}=Z,X=this.#Z,Q=u();for(let K=W;K.head;K=K.tail){let V=this.#F(K.head);if(V instanceof j){X=V[0][0],Q=BQ(FZ.fromArray([Q,V[0][1]]));break}}return this.#Y(Q),this.#Z=X,this.#X(this.#Z)}case b9:{let{name:W,value:X}=Z,Q=this.#H(W,X);if(Q instanceof P)return this.#W;else{let[K,V]=this.#K(this.#Z,Q[0]);return this.#Y(V),this.#Z=K,this.#X(this.#Z)}}case h9:{let{name:W,value:X}=Z,Q=this.#U(W,X);if(Q instanceof P)return this.#W;else{let[K,V]=this.#K(this.#Z,Q[0]);return this.#Y(V),this.#Z=K,this.#X(this.#Z)}}case _9:{let{path:W,name:X,event:Q}=Z,[K,V]=x9(this.#V,W,X,Q);if(this.#V=K,V instanceof P)return this.#W;else{let[G,Y]=this.#K(this.#Z,V[0].message);return this.#Y(Y),this.#Z=G,this.#X(this.#Z)}}case z6:{let{key:W,value:X}=Z,Q=OZ(this.#Q.contexts,W);if(Q instanceof P)return this.#W;if(Q=A0(X,Q[0]),Q instanceof P)return this.#W;let[K,V]=this.#K(this.#Z,Q[0]);return this.#Y(V),this.#Z=K,this.#X(this.#Z)}}}#H(Z,W){let X=OZ(this.#Q.attributes,Z);switch(X.constructor){case j:return X[0](W);case P:return new P(void 0)}}#U(Z,W){let X=OZ(this.#Q.properties,Z);switch(X.constructor){case j:return X[0](W);case P:return new P(void 0)}}#Y(Z){let W=(G)=>this.send(new T0(G)),X=(G,Y)=>this.send(new n0(G,Y)),Q=()=>{return},K=()=>{return},V=(G,Y)=>this.send(new $9(G,Y));globalThis.queueMicrotask(()=>{PQ(Z,W,X,Q,K,V)})}}class yK extends N{constructor(Z,W,X,Q){super();this.init=Z,this.update=W,this.view=X,this.config=Q}}class C6 extends N{constructor(Z){super();this.selector=Z}}class d8 extends N{}function gK(Z,W,X){return new yK(Z,W,X,EK(f))}function bK(Z,W,X){return C8(!u8(),new P(new d8),()=>{return fK(Z,W,X)})}class h extends N{constructor(Z,W,X,Q,K,V,G){super();this.scheme=Z,this.userinfo=W,this.host=X,this.port=Q,this.path=K,this.query=V,this.fragment=G}}function PY(Z){return 48>=Z&&Z<=57||65>=Z&&Z<=90||97>=Z&&Z<=122||Z===58||Z===46}function nZ(Z,W){return new j(new h(W.scheme,W.userinfo,W.host,W.port,W.path,W.query,new L(Z)))}function BY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V.startsWith("#"))if(Y===0){let J=V.slice(1);return nZ(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,G.host,G.port,G.path,new L(H),G.fragment);return nZ(J,F)}else if(V==="")return new j(new h(G.scheme,G.userinfo,G.host,G.port,G.path,new L(K),G.fragment));else{let J=v0(V),H;H=J[1],Z=K,W=H,X=G,Q=Y+1}}}function j0(Z,W){return BY(Z,Z,W,0)}function SY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V.startsWith("?")){let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,G.host,G.port,H,G.query,G.fragment);return j0(J,F)}else if(V.startsWith("#")){let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,G.host,G.port,H,G.query,G.fragment);return nZ(J,F)}else if(V==="")return new j(new h(G.scheme,G.userinfo,G.host,G.port,K,G.query,G.fragment));else{let J=v0(V),H;H=J[1],Z=K,W=H,X=G,Q=Y+1}}}function r0(Z,W){return SY(Z,Z,W,0)}function X0(Z,W,X){while(!0){let Q=Z,K=W,V=X;if(Q.startsWith("0"))Z=Q.slice(1),W=K,X=V*10;else if(Q.startsWith("1"))Z=Q.slice(1),W=K,X=V*10+1;else if(Q.startsWith("2"))Z=Q.slice(1),W=K,X=V*10+2;else if(Q.startsWith("3"))Z=Q.slice(1),W=K,X=V*10+3;else if(Q.startsWith("4"))Z=Q.slice(1),W=K,X=V*10+4;else if(Q.startsWith("5"))Z=Q.slice(1),W=K,X=V*10+5;else if(Q.startsWith("6"))Z=Q.slice(1),W=K,X=V*10+6;else if(Q.startsWith("7"))Z=Q.slice(1),W=K,X=V*10+7;else if(Q.startsWith("8"))Z=Q.slice(1),W=K,X=V*10+8;else if(Q.startsWith("9"))Z=Q.slice(1),W=K,X=V*10+9;else if(Q.startsWith("?")){let G=Q.slice(1),Y=new h(K.scheme,K.userinfo,K.host,new L(V),K.path,K.query,K.fragment);return j0(G,Y)}else if(Q.startsWith("#")){let G=Q.slice(1),Y=new h(K.scheme,K.userinfo,K.host,new L(V),K.path,K.query,K.fragment);return nZ(G,Y)}else if(Q.startsWith("/")){let G=new h(K.scheme,K.userinfo,K.host,new L(V),K.path,K.query,K.fragment);return r0(Q,G)}else if(Q==="")return new j(new h(K.scheme,K.userinfo,K.host,new L(V),K.path,K.query,K.fragment));else return new P(void 0)}}function c9(Z,W){if(Z.startsWith(":0")){let X=Z.slice(2);return X0(X,W,0)}else if(Z.startsWith(":1")){let X=Z.slice(2);return X0(X,W,1)}else if(Z.startsWith(":2")){let X=Z.slice(2);return X0(X,W,2)}else if(Z.startsWith(":3")){let X=Z.slice(2);return X0(X,W,3)}else if(Z.startsWith(":4")){let X=Z.slice(2);return X0(X,W,4)}else if(Z.startsWith(":5")){let X=Z.slice(2);return X0(X,W,5)}else if(Z.startsWith(":6")){let X=Z.slice(2);return X0(X,W,6)}else if(Z.startsWith(":7")){let X=Z.slice(2);return X0(X,W,7)}else if(Z.startsWith(":8")){let X=Z.slice(2);return X0(X,W,8)}else if(Z.startsWith(":9")){let X=Z.slice(2);return X0(X,W,9)}else if(Z===":")return new j(W);else if(Z==="")return new j(W);else if(Z.startsWith("?")){let X=Z.slice(1);return j0(X,W)}else if(Z.startsWith(":?")){let X=Z.slice(2);return j0(X,W)}else if(Z.startsWith("#")){let X=Z.slice(1);return nZ(X,W)}else if(Z.startsWith(":#")){let X=Z.slice(2);return nZ(X,W)}else if(Z.startsWith("/"))return r0(Z,W);else if(Z.startsWith(":")){let X=Z.slice(1);if(X.startsWith("/"))return r0(X,W);else return new P(void 0)}else return new P(void 0)}function hK(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V==="")return new j(new h(G.scheme,G.userinfo,new L(K),G.port,G.path,G.query,G.fragment));else if(V.startsWith(":")){let J=UZ(K,0,Y),H=new h(G.scheme,G.userinfo,new L(J),G.port,G.path,G.query,G.fragment);return c9(V,H)}else if(V.startsWith("/")){let J=UZ(K,0,Y),H=new h(G.scheme,G.userinfo,new L(J),G.port,G.path,G.query,G.fragment);return r0(V,H)}else if(V.startsWith("?")){let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,new L(H),G.port,G.path,G.query,G.fragment);return j0(J,F)}else if(V.startsWith("#")){let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,new L(H),G.port,G.path,G.query,G.fragment);return nZ(J,F)}else{let J=v0(V),H;H=J[1],Z=K,W=H,X=G,Q=Y+1}}}function TY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V==="")return new j(new h(G.scheme,G.userinfo,new L(V),G.port,G.path,G.query,G.fragment));else if(V.startsWith("]"))if(Y===0){let J=V.slice(1);return c9(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y+1),F=new h(G.scheme,G.userinfo,new L(H),G.port,G.path,G.query,G.fragment);return c9(J,F)}else if(V.startsWith("/"))if(Y===0)return r0(V,G);else{let J=UZ(K,0,Y),H=new h(G.scheme,G.userinfo,new L(J),G.port,G.path,G.query,G.fragment);return r0(V,H)}else if(V.startsWith("?"))if(Y===0){let J=V.slice(1);return j0(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,new L(H),G.port,G.path,G.query,G.fragment);return j0(J,F)}else if(V.startsWith("#"))if(Y===0){let J=V.slice(1);return nZ(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,G.userinfo,new L(H),G.port,G.path,G.query,G.fragment);return nZ(J,F)}else{let J=v0(V),H,F;if(H=J[0],F=J[1],PY(H))Z=K,W=F,X=G,Q=Y+1;else return hK(K,K,G,0)}}}function qY(Z,W){return TY(Z,Z,W,0)}function CY(Z,W){return hK(Z,Z,W,0)}function z8(Z,W){if(Z.startsWith("["))return qY(Z,W);else if(Z.startsWith(":")){let X=new h(W.scheme,W.userinfo,new L(""),W.port,W.path,W.query,W.fragment);return c9(Z,X)}else if(Z==="")return new j(new h(W.scheme,W.userinfo,new L(""),W.port,W.path,W.query,W.fragment));else return CY(Z,W)}function LY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V.startsWith("@"))if(Y===0){let J=V.slice(1);return z8(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(G.scheme,new L(H),G.host,G.port,G.path,G.query,G.fragment);return z8(J,F)}else if(V==="")return z8(K,G);else if(V.startsWith("/"))return z8(K,G);else if(V.startsWith("?"))return z8(K,G);else if(V.startsWith("#"))return z8(K,G);else{let J=v0(V),H;H=J[1],Z=K,W=H,X=G,Q=Y+1}}}function wY(Z,W){return LY(Z,Z,W,0)}function L6(Z,W){if(Z==="//")return new j(new h(W.scheme,W.userinfo,new L(""),W.port,W.path,W.query,W.fragment));else if(Z.startsWith("//")){let X=Z.slice(2);return wY(X,W)}else return r0(Z,W)}function EY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(V.startsWith("/"))if(Y===0)return L6(V,G);else{let J=UZ(K,0,Y),H=new h(new L(bZ(J)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return L6(V,H)}else if(V.startsWith("?"))if(Y===0){let J=V.slice(1);return j0(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(new L(bZ(H)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return j0(J,F)}else if(V.startsWith("#"))if(Y===0){let J=V.slice(1);return nZ(J,G)}else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(new L(bZ(H)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return nZ(J,F)}else if(V.startsWith(":"))if(Y===0)return new P(void 0);else{let J=V.slice(1),H=UZ(K,0,Y),F=new h(new L(bZ(H)),G.userinfo,G.host,G.port,G.path,G.query,G.fragment);return L6(J,F)}else if(V==="")return new j(new h(G.scheme,G.userinfo,G.host,G.port,K,G.query,G.fragment));else{let J=v0(V),H;H=J[1],Z=K,W=H,X=G,Q=Y+1}}}function _K(Z){let W,X=Z.fragment;if(X instanceof L){let I=X[0];W=U(["#",I])}else W=U([]);let Q=W,K,V=Z.query;if(V instanceof L){let I=V[0];K=z("?",z(I,Q))}else K=Q;let G=K,Y=z(Z.path,G),J,H=Z.host,F=V0(Z.path,"/");if(H instanceof L&&!F)if(H[0]!=="")J=z("/",Y);else J=Y;else J=Y;let R=J,O,S=Z.host,B=Z.port;if(S instanceof L&&B instanceof L){let I=B[0];O=z(":",z(a(I),R))}else O=R;let C=O,A,T=Z.scheme,M=Z.userinfo,q=Z.host;if(T instanceof L)if(M instanceof L)if(q instanceof L){let I=T[0],w=M[0],E=q[0];A=z(I,z("://",z(w,z("@",z(E,C)))))}else{let I=T[0];A=z(I,z(":",C))}else if(q instanceof L){let I=T[0],w=q[0];A=z(I,z("://",z(w,C)))}else{let I=T[0];A=z(I,z(":",C))}else if(M instanceof _&&q instanceof L){let I=q[0];A=z("//",z(I,C))}else A=C;return q8(A)}var vK=new h(new _,new _,new _,new _,"",new _,new _);function u9(Z){return EY(Z,Z,vK,0)}class d9 extends N{constructor(Z,W,X,Q){super();this.translator=Z,this.values=W,this.errors=X,this.run=Q}}class x6 extends N{constructor(Z){super();this.run=Z}}class k6 extends N{}class mK extends N{}class $K extends N{}class cK extends N{}class uK extends N{}class dK extends N{}class pK extends N{}class sK extends N{}class iK extends N{}class nK extends N{}class lK extends N{constructor(Z){super();this.limit=Z}}class rK extends N{constructor(Z){super();this.limit=Z}}class aK extends N{constructor(Z){super();this.limit=Z}}class oK extends N{constructor(Z){super();this.limit=Z}}class tK extends N{constructor(Z){super();this.limit=Z}}class eK extends N{constructor(Z){super();this.limit=Z}}class ZV extends N{}class WV extends N{}class XV extends N{}class f6 extends N{constructor(Z){super();this.run=Z}}class y6 extends N{}function QV(Z,W){let X=Z.values,Q=G9(X,W);return _Z(Q,"")}function p9(Z){let W=Z.run(Z.values,U([])),X,Q;if(X=W[0],Q=W[1],Q instanceof D)return new j(X);else return new P(new d9(Z.translator,Z.values,Q,Z.run))}function p8(Z,W,X){return new x6((Q,K)=>{let V=SW(Q,Z),G=W.run(V,new y6),Y,J;Y=G[0],J=G[2];let H;if(J instanceof D)H=K;else H=z([Z,J],K);let F=H;return X(Y).run(Q,F)})}function s9(Z){return new x6((W,X)=>{return[Z,X]})}function i9(Z,W){return new d9(Z.translator,NZ(W,Z.values),Z.errors,Z.run)}function yY(Z,W){if(Z instanceof D)return["",W,U([])];else return[Z.head,W,U([])]}function gY(Z,W){return new f6((X,Q)=>{let K=Z.run(X,Q),V,G,Y;V=K[0],G=K[1],Y=K[2];let J;if(G instanceof y6){let F=W(V);if(F instanceof j)J=Y;else{let R=F[0];J=z(R,Y)}}else J=Y;return[V,G,J]})}function KV(Z){return gY(Z,(W)=>{if(W==="")return new P(new k6);else return new j(W)})}function bY(Z){if(Z instanceof k6)return"must not be blank";else if(Z instanceof mK)return"must be a whole number";else if(Z instanceof $K)return"must be a number";else if(Z instanceof cK)return"must be an email";else if(Z instanceof uK)return"must be a phone number";else if(Z instanceof dK)return"must be a URL";else if(Z instanceof pK)return"must be a date";else if(Z instanceof sK)return"must be a time";else if(Z instanceof iK)return"must be a date and time";else if(Z instanceof nK)return"must be a hex colour code";else if(Z instanceof lK){let W=Z.limit;return"must be more than "+a(W)+" characters"}else if(Z instanceof rK){let W=Z.limit;return"must be less than "+a(W)+" characters"}else if(Z instanceof aK){let W=Z.limit;return"must be more than "+a(W)}else if(Z instanceof oK){let W=Z.limit;return"must be less than "+a(W)}else if(Z instanceof tK){let W=Z.limit;return"must be more than "+P8(W)}else if(Z instanceof eK){let W=Z.limit;return"must be less than "+P8(W)}else if(Z instanceof ZV)return"must be accepted";else if(Z instanceof WV)return"doesn't match";else if(Z instanceof XV)return"is already in use";else return Z.message}function n9(Z){return new d9(bY,U([]),U([]),Z.run)}function VV(Z,W){let X=Z.errors,Q=SW(X,W);return f0(Q,(K)=>{return t(K,Z.translator)})}var s8=new f6(yY);function b6(Z){let W;return W=Z[1],W}function GV(Z,W){return[Z,W]}function _6(Z,W){return zQ(Z,h0(W,(X)=>{return new w8(!1,!1,X)}),f,hW,hW,0,0)}function hY(Z){if(Z instanceof RZ)return new RZ(Z.kind,Z.name,Z.handler,Z.include,RQ,Z.stop_propagation,Z.debounce,Z.throttle);else return Z}function R8(Z){return _6("click",b0(Z))}function l9(Z){return _6("input",z9(U(["target","value"]),X8,(W)=>{return b0(Z(W))}))}function _Y(){let W=R9(0,X8,(Q)=>{return R9(1,LW(h0(X8,(K)=>{return new j(K)}),U([b0(new P(void 0))])),(K)=>{let G=P0(K,(Y)=>{return GV(Q,Y)});return b0(G)})}),X=wW(W);return h0(X,aX)}function r9(Z){let W=_6("submit",z9(U(["detail","formData"]),_Y(),(X)=>{let K=Z(X);return b0(K)}));return hY(W)}class i8 extends N{}class v6 extends N{}class m6 extends N{}class $6 extends N{}class c6 extends N{}class q0 extends N{constructor(Z,W,X,Q){super();this.id=Z,this.nome=W,this.ambiente=X,this.quantidade=Q}}function n8(Z,W,X,Q){let K=VV(Z,X);return qZ(U([]),z(pQ(U([OQ(X)]),U([$(Q)])),z(p0(U([$0(W),DQ(X),C9(X),Y8(QV(Z,X)),(()=>{if(K instanceof D)return IQ();else return MQ("true")})()])),t(K,(V)=>{return _8(U([]),U([$(V)]))}))))}function vY(Z,W){let X,Q,K;X=Z.nome,Q=Z.ambiente,K=Z.quantidade;let V="Produto "+a(W+1),G;if(J9(X)==="")G=U([V+": nome não pode ser vazio"]);else G=U([]);let J=G,H;if(J9(Q)==="")H=U([V+": ambiente não pode ser vazio"]);else H=U([]);let R=H,O;if(K<1)O=U([V+": quantidade deve ser maior que zero"]);else O=U([]);let B=O,C=NZ(J,R);return NZ(C,B)}function JV(Z){let X=LX(Z,vY);return Q9(X)}class HV extends N{constructor(Z,W){super();this.username=Z,this.password=W}}class d6 extends N{constructor(Z){super();this[0]=Z}}class UV extends N{constructor(Z){super();this[0]=Z}}class a9 extends N{constructor(Z){super();this[0]=Z}}class FV extends N{constructor(Z,W){super();this[0]=Z,this[1]=W}}function mY(){return n9(p8("username",s8,(Z)=>{return p8("password",s8,(W)=>{return s9(new HV(Z,W))})}))}function NV(Z){let W;return W=Z[0],y9(U([r9((Q)=>{let V=i9(W,Q),G=p9(V);return new UV(G)})]),U([n8(W,"text","username","Username"),n8(W,"password","password","Password"),z0(U([]),U([$("Login")]))]))}function zV(Z){return new d6(mY())}function RV(Z,W){let X=W[0];if(X instanceof j){let Q=X[0].username;return new FV(Q,new i8)}else{let Q=X[0];return new a9(new d6(Q))}}class o9 extends N{}class t9 extends N{}class IV extends N{}class jV extends N{}class OV extends N{}class DV extends N{}class MV extends N{}class AV extends N{}class PV extends N{}class p6 extends N{}class e9 extends N{}function BV(Z){if(Z instanceof o9)return"GET";else if(Z instanceof t9)return"POST";else if(Z instanceof IV)return"HEAD";else if(Z instanceof jV)return"PUT";else if(Z instanceof OV)return"DELETE";else if(Z instanceof DV)return"TRACE";else if(Z instanceof MV)return"CONNECT";else if(Z instanceof AV)return"OPTIONS";else if(Z instanceof PV)return"PATCH";else return Z[0]}function SV(Z){if(Z instanceof p6)return"http";else return"https"}function TV(Z){let W=bZ(Z);if(W==="http")return new j(new p6);else if(W==="https")return new j(new e9);else return new P(void 0)}class s6 extends N{constructor(Z,W,X){super();this.status=Z,this.headers=W,this.body=X}}class a0{constructor(Z){this.promise=Z}static wrap(Z){return Z instanceof Promise?new a0(Z):Z}static unwrap(Z){return Z instanceof a0?Z.promise:Z}}function I8(Z){return Promise.resolve(a0.wrap(Z))}function WW(Z,W){return Z.then((X)=>W(a0.unwrap(X)))}function l8(Z,W){return Z.then((X)=>a0.wrap(W(a0.unwrap(X))))}function CV(Z,W){return l8(Z,(Q)=>{return W(Q),Q})}function XW(Z,W){return WW(Z,(Q)=>{if(Q instanceof j){let K=Q[0];return W(K)}else{let K=Q[0];return I8(new P(K))}})}function n6(Z){return Z.toArray()}function LV(Z){return Z.length}function wV(Z,W){return Z[W]}function sY(Z,W){return W>=0&&W<LV(Z)}function EV(Z,W){if(sY(Z,W))return new j(wV(Z,W));else return new P(void 0)}function xV(Z){let W="",X=Z;while(X.tail){if(W!=="")W+="|";W+=nY(X.head),X=X.tail}return new RegExp(W)}function C0(Z,W){let X=W.match(Z);if(!X)return[W,"",""];let Q=X.index,K=X[0];return[W.slice(0,Q),K,W.slice(Q+K.length)]}function nY(Z){return Z.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function KW(Z){let X=W9(Z,(Q)=>{return Q!==""});return xV(X)}class j8 extends N{constructor(Z){super();this.line=Z}}class kV extends N{constructor(Z){super();this.starting_line=Z}}class fV extends N{constructor(Z,W,X,Q){super();this.separator=Z,this.newlines=W,this.separator_or_quote=X,this.quotes=Q}}function aY(Z,W,X,Q,K,V,G){while(!0){let Y=Z,J=W,H=X,F=Q,R=K,O=V,S=G,B=C0(F.quotes,Y),C=B[1];if(C===""){let A=B[2];if(A===""){let T=B[0],M=C0(F.newlines,H),q=M[0];if(q===""){let x=M[1];if(x===""){let I=M[2];if(I==="")return new P(new kV(R));else{let w=q,E=x,k=I,y=T+J+w,v=O+1;Z=y,W=E,X=k,Q=F,K=R,V=v,G=S}}else{let I=q,w=x,E=M[2],k=T+J+I,y=O+1;Z=k,W=w,X=E,Q=F,K=R,V=y,G=S}}else{let x=q,I=M[1],w=M[2],E=T+J+x,k=O+1;Z=E,W=I,X=w,Q=F,K=R,V=k,G=S}}else{let T=B[0],M=A;if(V0(M,F.separator)){let x=C0(F.separator_or_quote,M)[2],I;if(S==="")I=T;else I=S+T;return new j([x,J,H,O,I])}else return new P(new j8(O))}}else if(C==='""'){let A=B[0],T=B[2],M=S+A+'"';Z=T,W=J,X=H,Q=F,K=R,V=O,G=M}else{let A=B[2];if(A===""){let T=B[0],M;if(S==="")M=T;else M=S+T;return new j(["",J,H,O,M])}else{let T=B[0],M=A;if(V0(M,F.separator)){let x=C0(F.separator_or_quote,M)[2],I;if(S==="")I=T;else I=S+T;return new j([x,J,H,O,I])}else return new P(new j8(O))}}}}function oY(Z,W,X,Q,K,V){while(!0){let G=Z,Y=W,J=X,H=Q,F=K,R=V,O=C0(H.separator_or_quote,G),S=O[1];if(S===""){let B=O[2];if(B===""){let C=O[0];return new j([J,F,b(z(C,R))])}else{let C=O[0],A=B,T=z(C,R);Z=A,W=Y,X=J,Q=H,K=F,V=T}}else if(S==='"')if(O[0]===""){let C=O[2],T=aY(C,Y,J,H,F,F,"");if(T instanceof j){let M=T[0][0];if(M===""){let q=T[0][2],x=T[0][3],I=T[0][4];return new j([q,x,b(z(I,R))])}else{let q=M,x=T[0][1],I=T[0][2],w=T[0][3],E=T[0][4],k=z(E,R);Z=q,W=x,X=I,Q=H,K=w,V=k}}else return T}else return new P(new j8(F));else{let B=O[0],C=O[2],A=z(B,R);Z=C,W=Y,X=J,Q=H,K=F,V=A}}}function tY(Z,W,X){while(!0){let Q=Z,K=W,V=X,G=C0(K.newlines,Q),Y=G[0];if(Y===""){let J=G[2];if(J==="")return new j(["",V,U([])]);else Z=J,W=K,X=V+1}else{let J=Y,H=G[1],F=G[2];return oY(J,H,F,K,V+1,U([]))}}}function eY(Z,W,X,Q){while(!0){let K=Z,V=W,G=X,Y=Q;if(K==="")return new j(b(Y));else{let J=tY(K,V,G);if(J instanceof j){let H=J[0][0],F=J[0][1],R=J[0][2];Z=H,W=V,X=F,Q=z(R,Y)}else return J}}}function ZJ(Z,W){let X=new fV(W,KW(U([`\r
`,`
`])),KW(U([W,'"'])),KW(U(['""','"'])));return eY(Z,X,0,U([]))}function l6(Z,W){return P0(ZJ(Z,W),(X)=>{if(X instanceof D)return X;else{let{head:Q,tail:K}=X,V=n6(Q);return t(K,(G)=>{return K9(G,D0(),(Y,J,H)=>{if(J==="")return Y;else{let F=EV(V,H);if(F instanceof j){let R=F[0];return y0(Y,R,J)}else return Y}})})}})}class r8 extends N{constructor(Z,W,X,Q,K,V,G,Y){super();this.method=Z,this.headers=W,this.body=X,this.scheme=Q,this.host=K,this.port=V,this.path=G,this.query=Y}}function yV(Z){return new h(new L(SV(Z.scheme)),new _,new L(Z.host),Z.port,Z.path,Z.query,new _)}function gV(Z){return dZ((()=>{let W=Z.scheme,X=jX(W,"");return TV(X)})(),(W)=>{return dZ((()=>{let X=Z.host;return JW(X,void 0)})(),(X)=>{let Q=new r8(new o9,U([]),"",W,X,Z.port,Z.path,Z.query);return new j(Q)})})}function bV(Z,W,X){let Q=TW(Z.headers,bZ(W),X);return new r8(Z.method,Q,Z.body,Z.scheme,Z.host,Z.port,Z.path,Z.query)}function hV(Z,W){return new r8(Z.method,Z.headers,W,Z.scheme,Z.host,Z.port,Z.path,Z.query)}function _V(Z,W){return new r8(W,Z.headers,Z.body,Z.scheme,Z.host,Z.port,Z.path,Z.query)}async function mV(Z){try{return new j(await fetch(Z))}catch(W){return new P(new a8(W.toString()))}}function $V(Z){return new s6(Z.status,FZ.fromArray([...Z.headers]),Z)}function XJ(Z){let W=_K(yV(Z)),X=BV(Z.method).toUpperCase(),Q={headers:QJ(Z.headers),method:X};return[W,Q]}function cV(Z){let[W,X]=XJ(Z);if(X.method!=="GET"&&X.method!=="HEAD")X.body=Z.body;return new globalThis.Request(W,X)}function QJ(Z){let W=new globalThis.Headers;for(let[X,Q]of Z)W.append(X.toLowerCase(),Q);return W}async function r6(Z){let W;try{W=await Z.body.text()}catch(X){return new P(new o8)}return new j(Z.withFields({body:W}))}class a8 extends N{constructor(Z){super();this[0]=Z}}class o8 extends N{}function uV(Z){let X=cV(Z),Q=mV(X);return XW(Q,(K)=>{return I8(new j($V(K)))})}var a6=(Z)=>{if(!globalThis.location)return new P(void 0);let W=new URL(Z,globalThis.location.href),X=HJ(W);return new j(X)},HJ=(Z)=>{let W=(X)=>X?new L(X):new _;return new h(W(Z.protocol?.slice(0,-1)),new _,W(Z.hostname),W(Z.port&&Number(Z.port)),Z.pathname,W(Z.search?.slice(1)),W(Z.hash?.slice(1)))};class o6 extends N{}class t6 extends N{constructor(Z){super();this[0]=Z}}class pV extends N{constructor(Z){super();this[0]=Z}}class sV extends N{}class iV extends N{constructor(Z){super();this[0]=Z}}class nV extends N{constructor(Z){super();this.run=Z}}function lV(Z){return new nV((W)=>{return Z(dZ(W,(X)=>{let Q=X.status,K=Q;if(K>=200&&K<300)return new j(X);else{let V=Q;if(V>=400&&V<600)return new P(new pV(X));else return new P(new iV(X))}}))})}function UJ(Z,W){return x8((X)=>{let Q=uV(Z),K=XW(Q,r6),V=l8(K,(Y)=>{return j9(Y,(J)=>{if(J instanceof a8)return new sV;else if(J instanceof o8)return new o6;else return new o6})}),G=l8(V,W.run);CV(G,X);return})}function FJ(Z,W){return UJ(Z,W)}function dV(Z,W){return x8((X)=>{let Q=new P(Z),K=W.run(Q);return X(K)})}function NJ(Z){let W;if(Z.startsWith("./"))W=a6(Z);else if(Z.startsWith("/"))W=a6(Z);else W=u9(Z);return O9(W,new t6(Z))}function rV(Z,W,X){let Q=NJ(Z);if(Q instanceof j){let K=Q[0],V=gV(K),G=P0(V,(J)=>{let F=_V(J,new t9),R=bV(F,"content-type","application/json"),O=hV(R,xW(W));return FJ(O,X)}),Y=j9(G,(J)=>{return dV(new t6(Z),X)});return rX(Y)}else{let K=Q[0];return dV(K,X)}}async function aV(Z){let W=document.getElementById(Z);if(!W||!W.files||W.files.length===0)return new P("Nenhum arquivo selecionado");let X=W.files[0],Q=X.name.toLowerCase().endsWith(".csv"),K=X.type==="text/csv"||X.type==="application/vnd.ms-excel";if(!Q&&!K)return new P("O arquivo selecionado não é um CSV");try{let V=await X.text();return new j(V)}catch(V){return new P("Erro ao ler o arquivo: "+V.message)}}var RJ="src/roles/sales_intake.gleam";class AZ extends N{constructor(Z,W,X,Q,K,V){super();this.username=Z,this.products=W,this.status=X,this.errors=Q,this.supplier_form=K,this.supplier=V}}class ZX extends N{}class e6 extends N{constructor(Z){super();this[0]=Z}}class WX extends N{constructor(Z){super();this[0]=Z}}class t8 extends N{constructor(Z){super();this[0]=Z}}class XX extends N{}class QX extends N{constructor(Z){super();this[0]=Z}}class KX extends N{}class VX extends N{constructor(Z){super();this[0]=Z}}class oV extends N{}class tV extends N{constructor(Z){super();this.supplier=Z}}function IJ(Z,W){return y9(U([r9((Q)=>{let V=i9(Z,Q),G=p9(V);return new WX(G)})]),U([n8(Z,"text","supplier","Fornecedor"),z0(U([]),U([$("Fornecedor")])),cQ(U([]),U([$((()=>{if(W instanceof L)return W[0];else return"Nenhum fornecedor fornecido"})())]))]))}function jJ(Z){if(Z instanceof j8){let W=Z.line;return"Erro no CSV: aspas não escapadas na linha "+a(W)}else{let W=Z.starting_line;return"Erro no CSV: aspas abertas sem fechamento (início na linha "+a(W)+")"}}function OJ(Z){let W=l6(Z,",");if(W instanceof j){let X=W[0],Q=U(["nome","ambiente","quantidade"]),K;K=K9(X,new j(void 0),(Y,J,H)=>{if(Y instanceof j)if((()=>{return BW(Q,(O)=>{return qW(J,O)})})())return new j(void 0);else return new P("Linha "+a(H+1)+" não contém todos os campos obrigatórios ("+K0(Q,", ")+")");else return Y});let G=K;if(G instanceof j)return new j(Z);else return G}else{let X=W[0];return new P(jJ(X))}}function DJ(Z){let W,X,Q,K=Z.supplier;if(K instanceof L)W=Z.username,X=Z.products,Q=K[0];else throw E0("let_assert",RJ,"roles/sales_intake",243,"submit_sale","Pattern match failed, no pattern matched the value.",{value:Z,start:6137,end:6221,pattern_start:6148,pattern_end:6209});let V=G8(U([["username",Z0(W)],["supplier",Z0(Q)],["products",L8(X,(Y)=>{let J,H,F;return J=Y.nome,H=Y.ambiente,F=Y.quantidade,G8(U([["nome",Z0(J)],["ambiente",Z0(H)],["quantidade",M9(F)]]))})]])),G=lV((Y)=>{return new QX(Y)});return rV("/sales_intake",V,G)}function MJ(Z){let W,X;W=Z.products,X=Z.supplier;let Q;if(X instanceof L)Q=U([]);else Q=U(["Fornecedor é obrigatório"]);let K=Q,V;if(W instanceof D)V=U(["Não é possível registrar venda sem produtos"]);else V=U([]);let G=V,Y;if(W instanceof D)Y=W;else Y=JV(W);let J=Y,H,F=NZ(K,G);H=NZ(F,J);let R=H;if(R instanceof D)return new j(Z);else return new P(R)}function AJ(Z){let W,X,Q,K;return W=Z.id,X=Z.nome,Q=Z.ambiente,K=Z.quantidade,X6(U([]),U([v8(U([]),U([p0(U([$0("text"),Y8(X),l9((V)=>{return new t8(new q0(W,V,Q,K))})]))])),v8(U([]),U([p0(U([$0("text"),Y8(Q),l9((V)=>{return new t8(new q0(W,X,V,K))})]))])),v8(U([]),U([p0(U([$0("number"),Y8(a(K)),l9((V)=>{let G,J=S8(V);return G=_Z(J,K),new t8(new q0(W,X,Q,G))})]))])),v8(U([]),U([z0(U([YZ("text-red-600"),R8(new VX(W))]),U([$("✕")]))]))]))}function PJ(Z){return qZ(U([]),U([uQ(U([YZ("w-full border-collapse")]),U([dQ(U([]),U([X6(U([]),U([m8(U([]),U([$("Nome")])),m8(U([]),U([$("Ambiente")])),m8(U([]),U([$("Quantidade")])),m8(U([]),U([]))]))])),BK(U([]),t(Z,(W)=>{return[a(W.id),AJ(W)]}))])),qZ(U([YZ("mt-2")]),U([z0(U([YZ("px-3 py-1 bg-blue-600 text-white rounded"),R8(new KX)]),U([$("+ Adicionar produto")]))]))]))}function BJ(){return qZ(U([YZ("max-w-3xl mx-auto bg-white border border-gray-200 rounded-xl shadow-sm p-6")]),U([qZ(U([YZ("flex items-start gap-4")]),U([qZ(U([YZ("flex-shrink-0 w-10 h-10 rounded-full bg-blue-100 text-blue-600 flex items-center justify-center font-semibold")]),U([$("1")])),qZ(U([]),U([mQ(U([YZ("text-lg font-semibold text-gray-900")]),U([$("Exportação do orçamento no sistema atual")])),$Q(U([YZ("mt-4 space-y-2 text-sm text-gray-700 list-decimal list-inside")]),U([cZ(U([]),U([$("Acessar Lista de Orçamentos")])),cZ(U([]),U([$("Selecionar o orçamento fechado")])),cZ(U([]),U([$("Clicar em Enviar")])),cZ(U([]),U([$("Salvar arquivo em Excel (XLS)")])),cZ(U([]),U([$("Converter o arquivo para CSV")])),cZ(U([]),U([$("Importar o CSV no novo sistema")]))])),qZ(U([YZ("mt-4 rounded-lg bg-gray-50 border border-gray-200 p-4 text-sm text-gray-700")]),U([W6(U([YZ("list-disc list-inside space-y-1")]),U([cZ(U([]),U([$("Cada arquivo representa uma venda (orçamento)")])),cZ(U([]),U([$("Uma venda contém uma lista de produtos")])),cZ(U([]),U([$("Produtos incluem quantidade e ambiente")])),cZ(U([]),U([$("O fornecedor não vem no arquivo e será informado depois")]))]))]))]))]))]))}function eV(Z){let W,X,Q,K,V,G;return W=Z.username,X=Z.products,Q=Z.status,K=Z.errors,V=Z.supplier_form,G=Z.supplier,qZ(U([]),U([_8(U([]),U([$("Bem-Vindo "+W)])),_8(U([]),U([$(Q)])),W6(U([YZ("text-red-600 list-disc list-inside")]),t(K,(Y)=>{return cZ(U([]),U([$(Y)]))})),IJ(V,G),PJ(X),p0(U([$0("file"),C9("imported-sale"),jQ(U([".csv","text/csv"]))])),z0(U([R8(new ZX)]),U([$("Import Sale")])),BJ(),qZ(U([YZ("flex gap-4 mt-6")]),U([z0(U([YZ("px-4 py-2 bg-green-600 text-white rounded"),R8(new XX)]),U([$("Registrar Venda")])),z0(U([YZ("px-4 py-2 bg-gray-300 text-gray-800 rounded"),R8(new oV)]),U([$("Resetar")]))]))]))}function SJ(){return n9(p8("supplier",(()=>{return KV(s8)})(),(Z)=>{return s9(new tV(Z))}))}function GX(Z){return new AZ(Z,U([new q0(0,"","",1)]),"",U([]),SJ(),new _)}function TJ(Z){let W=l6(Z,","),X=_Z(W,U([])),Q=CX(X,-1,(K,V)=>{let G=K+1;return[G,new q0(G,(()=>{let Y=OZ(V,"nome");return _Z(Y,"")})(),(()=>{let Y=OZ(V,"ambiente");return _Z(Y,"")})(),(()=>{let Y=OZ(V,"quantidade"),J=_Z(Y,"1"),H=S8(J);return _Z(H,1)})())]});return b6(Q)}function qJ(Z){let X=t(Z,(V)=>{return V.id}),Q=EX(X,B8),K=_Z(Q,-1);return((V)=>{return V+1})(K)}function Z7(Z,W){if(W instanceof ZX)return[new AZ(Z.username,Z.products,"Reading file…",Z.errors,Z.supplier_form,Z.supplier),x8((X)=>{let Q=WW(aV("imported-sale"),(K)=>{return I8(X(new e6(K)))});return})];else if(W instanceof e6){let X=W[0];if(X instanceof j){let Q=X[0],K=OJ(Q);if(K instanceof j){let V=K[0];return[new AZ(Z.username,TJ(V),"csv importado com sucesso!",Z.errors,Z.supplier_form,Z.supplier),u()]}else{let V=K[0];return[new AZ(Z.username,Z.products,"Falha ao importar: "+V,Z.errors,Z.supplier_form,Z.supplier),u()]}}else{let Q=X[0];return[new AZ(Z.username,Z.products,"Failed to read file: "+Q,Z.errors,Z.supplier_form,Z.supplier),u()]}}else if(W instanceof WX){let X=W[0];if(X instanceof j){let Q=X[0].supplier;return[new AZ(Z.username,Z.products,Z.status,Z.errors,Z.supplier_form,new L(Q)),u()]}else{let Q=X[0];return[new AZ(Z.username,Z.products,Z.status,Z.errors,Q,Z.supplier),u()]}}else if(W instanceof t8){let X=W[0];return[new AZ(Z.username,t(Z.products,(Q)=>{if(Q.id===X.id)return X;else return Q}),Z.status,Z.errors,Z.supplier_form,Z.supplier),u()]}else if(W instanceof XX){let X=MJ(Z);if(X instanceof j){let Q=X[0];return[new AZ(Q.username,Q.products,"Enviando venda…",U([]),Q.supplier_form,Q.supplier),DJ(Q)]}else{let Q=X[0];return[new AZ(Z.username,Z.products,"",Q,Z.supplier_form,Z.supplier),u()]}}else if(W instanceof QX)if(W[0]instanceof j)return[new AZ(Z.username,Z.products,"Venda registrada com sucesso",U([]),Z.supplier_form,Z.supplier),u()];else return[new AZ(Z.username,Z.products,"Erro ao registrar venda por parte do servidor",U([]),Z.supplier_form,Z.supplier),u()];else if(W instanceof KX){let X=qJ(Z.products);return[new AZ(Z.username,NZ(Z.products,U([new q0(X,"","",1)])),Z.status,Z.errors,Z.supplier_form,Z.supplier),u()]}else if(W instanceof VX){let X=W[0];return[new AZ(Z.username,W9(Z.products,(Q)=>{return Q.id!==X}),Z.status,Z.errors,Z.supplier_form,Z.supplier),u()]}else return[GX(Z.username),u()]}var LJ="src/artisan.gleam";class lZ extends N{constructor(Z){super();this[0]=Z}}class VW extends N{constructor(Z){super();this[0]=Z}}class GW extends N{constructor(Z){super();this[0]=Z}}class YX extends N{constructor(Z){super();this[0]=Z}}function wJ(Z){return[new lZ(zV(void 0)),u()]}function EJ(Z,W){if(Z instanceof lZ){let X=Z[0];if(W instanceof GW){let Q=W[0],K=RV(X,Q);if(K instanceof a9){let V=K[0];return[new lZ(V),u()]}else{let V=K[0],G=K[1];if(G instanceof i8)return[new VW(GX(V)),u()];else if(G instanceof v6)return[new lZ(X),u()];else if(G instanceof m6)return[new lZ(X),u()];else if(G instanceof $6)return[new lZ(X),u()];else if(G instanceof c6)return[new lZ(X),u()];else return[new lZ(X),u()]}}else return[new lZ(X),u()]}else{let X=Z[0];if(W instanceof GW)return[new VW(X),u()];else{let Q=W[0],K=Z7(X,Q),V,G;return V=K[0],G=K[1],[new VW(V),AQ(G,(Y)=>{return new YX(Y)})]}}}function xJ(Z){return qZ(U([YZ("p-32 mx-auto w-full max-w-2xl space-y-4")]),(()=>{if(Z instanceof lZ){let W=Z[0];return U([(()=>{let X=NV(W);return Z6(X,(Q)=>{return new GW(Q)})})()])}else{let W=Z[0];return U([(()=>{let X=eV(W);return Z6(X,(Q)=>{return new YX(Q)})})()])}})())}function W7(){let Z=gK(wJ,EJ,xJ),W=bK(Z,"#app",void 0);if(!(W instanceof j))throw E0("let_assert",LJ,"artisan",13,"main","Pattern match failed, no pattern matched the value.",{value:W,start:279,end:328,pattern_start:290,pattern_end:295});return W}W7();
